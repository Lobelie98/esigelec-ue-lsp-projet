(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return(nf.Dialog=b(c))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.Dialog=b(require("jquery")))}else{nf.Dialog=b(a.$)}}}(this,function(b){b(document).ready(function(){b("#nf-ok-dialog").modal({scrollableContentStyle:"scrollable",handler:{close:function(){b("#nf-ok-dialog-content").empty()}}});b("#nf-yes-no-dialog").modal({scrollableContentStyle:"scrollable",handler:{close:function(){b("#nf-yes-no-dialog-content").empty();b("#nf-yes-no-dialog").modal("setButtonModel",[])}}})});var a={showOkDialog:function(c){c=b.extend({headerText:"",dialogContent:""},c);var d=b("<p></p>").append(c.dialogContent);b("#nf-ok-dialog-content").append(d).append("</br>");b("#nf-ok-dialog").modal("setButtonModel",[{buttonText:"Ok",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){b("#nf-ok-dialog").modal("hide");if(typeof c.okHandler==="function"){c.okHandler.call(this)}}}}]);b("#nf-ok-dialog").modal("setHeaderText",c.headerText).modal("show")},showYesNoDialog:function(c){c=b.extend({headerText:"",dialogContent:"",yesText:"Yes",noText:"No"},c);var d=b("<p></p>").append(c.dialogContent);b("#nf-yes-no-dialog-content").append(d);b("#nf-yes-no-dialog").modal("setButtonModel",[{buttonText:c.yesText,color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){b("#nf-yes-no-dialog").modal("hide");if(typeof c.yesHandler==="function"){c.yesHandler.call(this)}}}},{buttonText:c.noText,color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){b("#nf-yes-no-dialog").modal("hide");if(typeof c.noHandler==="function"){c.noHandler.call(this)}}}}]);b("#nf-yes-no-dialog").modal("setHeaderText",c.headerText).modal("show")},showDisconnectedFromClusterMessage:function(c){a.showOkDialog({headerText:"Cluster Connection",dialogContent:"This node is currently not connected to the cluster. Any modifications to the data flow made here will not replicate across the cluster.",okHandler:function(){if(typeof c==="function"){c.call(this)}}})},showConnectedToClusterMessage:function(c){a.showOkDialog({headerText:"Cluster Connection",dialogContent:"This node just joined the cluster. Any modifications to the data flow made here will replicate across the cluster.",okHandler:function(){if(typeof c==="function"){c.call(this)}}})}};return a}));
(function(a,b){if(typeof define==="function"&&define.amd){define([],function(){return(nf.Storage=b())})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.Storage=b())}else{nf.Storage=b()}}}(this,function(){var h=false;var g=86400000;var f=g*2;var b=function(i){return typeof i==="undefined"};var e=function(i){return i===null};var d=function(i){return !b(i)&&!e(i)};var c=function(k){if(d(k.expires)){var i=new Date(k.expires);var j=new Date();return i.valueOf()<j.valueOf()}else{return false}};var a=function(i){try{var j=JSON.parse(localStorage.getItem(i));if(d(j)){return j}else{return null}}catch(k){return null}};return{init:function(){for(var k=0;k<localStorage.length;k++){try{var j=localStorage.key(k);this.getItem(j)}catch(l){}}},acknowledgeDisconnection:function(){h=true},resetDisconnectionAcknowledgement:function(){h=false},isDisconnectionAcknowledged:function(){return h},setItem:function(j,l,i){i=d(i)?i:new Date().valueOf()+f;var k={expires:i,item:l};localStorage.setItem(j,JSON.stringify(k))},hasItem:function(i){return a(i)!==null},getItem:function(i){var j=a(i);if(j===null){return null}if(c(j)){this.removeItem(i);return null}if(d(j.item)){return j.item}else{return null}},getItemExpiration:function(i){var j=a(i);if(j===null){return null}if(d(j.expires)){return j.expires}else{return null}},removeItem:function(i){localStorage.removeItem(i)}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","d3","nf.Storage","lodash-core","moment"],function(f,e,d,c,g){return(nf.Common=b(f,e,d,c,g))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.Common=b(require("jquery"),require("d3"),require("nf.Storage"),require("lodash-core"),require("moment")))}else{nf.Common=b(a.$,a.d3,a.nf.Storage,a._,a.moment)}}}(this,function(f,e,c,b,h){f(document).ready(function(){var i="images/bg-error.png";f("<img/>").attr("src",i).on("load",function(){f("div.message-pane").css("background-image",i)});f(document).on("mouseenter","span.link",function(){f(this).addClass("link-over")}).on("mouseleave","span.link",function(){f(this).removeClass("link-over")});f(document).on("click","div.nf-checkbox",function(){var k=f(this);var j=k.hasClass("checkbox-unchecked");if(j){k.removeClass("checkbox-unchecked").addClass("checkbox-checked")}else{k.removeClass("checkbox-checked").addClass("checkbox-unchecked")}k.trigger("change",{isChecked:j})});f(document).on("click",".nf-checkbox-label",function(j){f(j.target).parent().find(".nf-checkbox").click()});f(document).ajaxStart(function(){f("div.loading-container").addClass("ajax-loading")}).ajaxStop(function(){f("div.loading-container").removeClass("ajax-loading")});if(c.getItem("jwt")!==null){f("#user-logout-container").css("display","block");g.scheduleTokenRefresh()}f("#user-logout").on("click",function(){c.removeItem("jwt");window.location="../nifi/logout"});f("#user-home").on("click",function(){if(top!==window){parent.window.location="../nifi"}else{window.location="../nifi"}})});var d=null;var a=[{text:"view the user interface",value:"flow",description:"Allows users to view the user interface"},{text:"access the controller",value:"controller",description:"Allows users to view/modify the controller including Reporting Tasks, Controller Services, Parameter Contexts, and Nodes in the Cluster"},{text:"access parameter contexts",value:"parameter-contexts",description:"Allows users to view/modify Parameter Contexts"},{text:"query provenance",value:"provenance",description:"Allows users to submit a Provenance Search and request Event Lineage"},{text:"access restricted components",value:"restricted-components",description:"Allows users to create/modify restricted components assuming other permissions are sufficient"},{text:"access all policies",value:"policies",description:"Allows users to view/modify the policies for all components"},{text:"access users/user groups",value:"tenants",description:"Allows users to view/modify the users and user groups"},{text:"retrieve site-to-site details",value:"site-to-site",description:"Allows other NiFi instances to retrieve Site-To-Site details of this NiFi"},{text:"view system diagnostics",value:"system",description:"Allows users to view System Diagnostics"},{text:"proxy user requests",value:"proxy",description:"Allows proxy machines to send requests on the behalf of others"},{text:"access counters",value:"counters",description:"Allows users to view/modify Counters"}];var g={ANONYMOUS_USER_TEXT:"Anonymous user",config:{sensitiveText:"Sensitive value set",tooltipConfig:{style:{classes:"nifi-tooltip"},show:{solo:true,effect:function(i){f(this).slideDown(100)}},hide:{effect:function(i){f(this).slideUp(100)}},position:{at:"top center",my:"bottom center"}}},SUPPORTS_SVG:!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,currentUser:undefined,sortVersion:function(j,t){if(j===t){return 0}var p=j.split(/-/);var u=t.split(/-/);if(p.length>=1&&u.length>=1){var r=p[0].split(/\./);var o=u[0].split(/\./);if(r.length>=1&&o.length>=1){var m=Math.min(r.length,o.length);for(var n=0;n<m;n++){var s=parseInt(r[n],10);var l=parseInt(o[n],10);if(isNaN(s)&&isNaN(l)){continue}else{if(isNaN(s)){return -1}else{if(isNaN(l)){return 1}}}if(s!==l){return s-l}}if(r.length===o.length){if(p.length===u.length){var q=g.substringAfterFirst(j,p[0]);var k=g.substringAfterFirst(t,u[0]);return q===k?0:q>k?1:-1}else{return u.length-p.length}}else{return r.length-o.length}}else{if(r.length>=1){return 1}else{if(o.length>=1){return -1}else{return 0}}}}else{if(p.length>=1){return 1}else{if(u.length>=1){return -1}else{return 0}}}},sortType:function(i,l){var j=function(o,m){var p=g.formatBundle(o.bundle);var n=g.formatBundle(m.bundle);return p===n?0:p>n?1:-1};var k=function(t,s){if(i.columnId==="version"){var r=g.isDefinedAndNotNull(t.bundle[i.columnId])?t.bundle[i.columnId]:"";var p=g.isDefinedAndNotNull(s.bundle[i.columnId])?s.bundle[i.columnId]:"";var n=g.sortVersion(r,p);return n===0?j(t,s):n}else{if(i.columnId==="type"){var q=g.substringAfterLast(t[i.columnId],".");var o=g.substringAfterLast(s[i.columnId],".");return q===o?0:q>o?1:-1}else{var m=g.isDefinedAndNotNull(t[i.columnId])?t[i.columnId]:"";var u=g.isDefinedAndNotNull(s[i.columnId])?s[i.columnId]:"";return m===u?j(t,s):m>u?1:-1}}};l.sort(k,i.sortAsc)},typeFormatter:function(n,j,m,l,i){var k="";if(i.restricted===true){k+='<div class="view-usage-restriction fa fa-shield"></div><span class="hidden row-id">'+g.escapeHtml(i.id)+"</span>"}else{k+='<div class="fa"></div>'}k+=g.escapeHtml(m);return k},genericValueFormatter:function(m,j,l,k,i){return g.escapeHtml(l)},typeBundleFormatter:function(m,j,l,k,i){return g.escapeHtml(g.formatBundle(i.bundle))},typeVersionFormatter:function(n,j,m,l,i){var k="";if(g.isDefinedAndNotNull(i.bundle)){k+=('<div style="float: left;">'+g.escapeHtml(i.bundle.version)+"</div>")}else{k+='<div style="float: left;">unversioned</div>'}if(!g.isEmpty(i.controllerServiceApis)){k+='<div class="controller-service-apis fa fa-list" title="Compatible Controller Service" style="margin-left: 4px;"></div><span class="hidden row-id">'+g.escapeHtml(i.id)+"</span>"}k+='<div class="clear"></div>';return k},instanceTypeFormatter:function(m,j,l,k,i){if(!i.permissions.canRead){return""}return g.escapeHtml(g.formatType(i.component))},instanceBundleFormatter:function(m,j,l,k,i){if(!i.permissions.canRead){return""}return g.typeBundleFormatter(m,j,l,k,i.component)},getVersionControlTooltip:function(i){return i.stateExplanation},formatClassName:function(i){return g.substringAfterLast(i.type,".")},formatType:function(i){var j=g.formatClassName(i);if(i.bundle.version!=="unversioned"){j+=(" "+i.bundle.version)}return j},formatBundle:function(i){var j="";if(i.group!=="default"){j=i.group+" - "}return j+i.artifact},setCurrentUser:function(i){g.currentUser=i},scheduleTokenRefresh:function(){if(d!==null){clearInterval(d)}var i=g.MILLIS_PER_MINUTE;var j=function(){var l=c.getItemExpiration("jwt");if(l!==null){var n=new Date(l);var m=new Date();var k=n.valueOf()-m.valueOf()-(30*g.MILLIS_PER_SECOND);if(k<i){if(f("#current-user").text()!==g.ANONYMOUS_USER_TEXT&&!f("#anonymous-user-alert").is(":visible")){f("#anonymous-user-alert").show().qtip(f.extend({},g.config.tooltipConfig,{content:"Your session will expire soon. Please log in again to avoid being automatically logged out.",position:{my:"top right",at:"bottom left"}}))}}}};j();d=setInterval(j,i)},setAnonymousUserLabel:function(){var i=f("#anonymous-user-alert");if(i.data("qtip")){i.qtip("api").destroy(true)}i.show().qtip(f.extend({},g.config.tooltipConfig,{content:"You are accessing with limited authority. Log in or request an account to access with additional authority granted to you by an administrator.",position:{my:"top right",at:"bottom left"}}));f("#current-user").text(g.ANONYMOUS_USER_TEXT).show()},getJwtPayload:function(j){if(g.isDefinedAndNotNull(j)){var i=j.split(/\./);if(i.length!==3){return""}var l=f.base64.atob(i[1]);var k=JSON.parse(l);if(g.isDefinedAndNotNull(k)){return k}else{return null}}return null},canVersionFlows:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.canVersionFlows===true}else{return false}},canAccessProvenance:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.provenancePermissions.canRead===true}else{return false}},canAccessRestrictedComponents:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.restrictedComponentsPermissions.canWrite===true}else{return false}},canAccessComponentRestrictions:function(j){if(g.isDefinedAndNotNull(g.currentUser)){if(g.currentUser.restrictedComponentsPermissions.canWrite===true){return true}var i=function(m){if(g.isEmpty(g.currentUser.componentRestrictionPermissions)){return false}var l=false;f.each(g.currentUser.componentRestrictionPermissions,function(n,o){if(o.requiredPermission.id===m.id){if(o.permissions.canWrite===true){l=true;return false}}});return l};var k=true;if(g.isEmpty(j)){k=false}else{f.each(j,function(l,m){if(!i(m.requiredPermission)){k=false;return false}})}return k}else{return false}},canAccessCounters:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.countersPermissions.canRead===true}else{return false}},canModifyCounters:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.countersPermissions.canRead===true&&g.currentUser.countersPermissions.canWrite===true}else{return false}},canAccessTenants:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.tenantsPermissions.canRead===true}else{return false}},canModifyTenants:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.tenantsPermissions.canRead===true&&g.currentUser.tenantsPermissions.canWrite===true}else{return false}},canModifyParameterContexts:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.parameterContextPermissions.canRead===true&&g.currentUser.parameterContextPermissions.canWrite===true}else{return false}},canAccessPolicies:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.policiesPermissions.canRead===true}else{return false}},canModifyPolicies:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.policiesPermissions.canRead===true&&g.currentUser.policiesPermissions.canWrite===true}else{return false}},canAccessController:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.controllerPermissions.canRead===true}else{return false}},canModifyController:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.controllerPermissions.canRead===true&&g.currentUser.controllerPermissions.canWrite===true}else{return false}},canAccessSystem:function(){if(g.isDefinedAndNotNull(g.currentUser)){return g.currentUser.systemPermissions.canRead===true}else{return false}},addHoverEffect:function(i,k,j){f(document).on("mouseenter",i,function(){f(this).removeClass(k).addClass(j)}).on("mouseleave",i,function(){f(this).removeClass(j).addClass(k)});return f(i).addClass(k)},toggleScrollable:function(i){if(f(i).is(":visible")){if(i.offsetHeight<i.scrollHeight||i.offsetWidth<i.scrollWidth){f(i).addClass("scrollable")}else{f(i).removeClass("scrollable")}}},determineContrastColor:function(i){if(parseInt(i,16)>16777215/1.5){return"#000000"}return"#ffffff"},showLogoutLink:function(){if(c.getItem("jwt")===null){f("#user-logout-container").css("display","none")}else{f("#user-logout-container").css("display","block")}},isContentViewConfigured:function(){var i=f("#nifi-content-viewer-url").text();return !g.isBlank(i)},populateField:function(j,i){if(g.isUndefined(i)||g.isNull(i)){return f("#"+j).addClass("unset").text("No value set")}else{if(i===""){return f("#"+j).addClass("blank").text("Empty string set")}else{return f("#"+j).text(i)}}},clearField:function(i){return f("#"+i).removeClass("unset blank").text("")},cleanUpTooltips:function(i,j){i.find(j).each(function(){var l=f(this);if(l.data("qtip")){var k=l.qtip("api");k.destroy(true)}})},formatPropertyTooltip:function(j,l){var m=[];if(g.isDefinedAndNotNull(j)){if(!g.isBlank(j.description)){m.push(g.escapeHtml(j.description))}if(!g.isBlank(j.defaultValue)){m.push("<b>Default value:</b> "+g.escapeHtml(j.defaultValue))}if(!g.isBlank(j.supportsEl)){m.push("<b>Expression language scope:</b> "+g.escapeHtml(j.expressionLanguageScope))}if(!g.isBlank(j.identifiesControllerService)){var i=g.formatType({type:j.identifiesControllerService,bundle:j.identifiesControllerServiceBundle});var k=g.formatBundle(j.identifiesControllerServiceBundle);m.push("<b>Requires Controller Service:</b> "+g.escapeHtml(i+" from "+k))}}if(g.isDefinedAndNotNull(l)){if(!g.isEmpty(l.previousValues)){var n=[];f.each(l.previousValues,function(p,o){n.push("<li>"+g.escapeHtml(o.previousValue)+" - "+g.escapeHtml(o.timestamp)+" ("+g.escapeHtml(o.userIdentity)+")</li>")});m.push('<b>History:</b><ul class="property-info">'+n.join("")+"</ul>")}}if(m.length>0){return m.join("<br/><br/>")}else{return null}},formatProperty:function(i,j){return'<div><span class="label">'+g.formatValue(i)+": </span>"+g.formatValue(j)+"</div>"},formatValue:function(i){if(g.isDefinedAndNotNull(i)){if(i===""){return'<span class="blank" style="font-size: 13px; padding-top: 2px;">Empty string set</span>'}else{return g.escapeHtml(i)}}else{return'<span class="unset" style="font-size: 13px; padding-top: 2px;">No value set</span>'}},escapeHtml:(function(){var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2f;"};return function(j){if(g.isDefinedAndNotNull(j)){return String(j).replace(/[&<>"'\/]/g,function(k){return i[k]})}else{return""}}}()),isSensitiveProperty:function(i){if(g.isDefinedAndNotNull(i)){return i.sensitive===true}else{return false}},isRequiredProperty:function(i){if(g.isDefinedAndNotNull(i)){return i.required===true}else{return false}},isDynamicProperty:function(i){if(g.isDefinedAndNotNull(i)){return i.dynamic===true}else{return false}},getAllowableValues:function(i){if(g.isDefinedAndNotNull(i)){return i.allowableValues}else{return null}},supportsEl:function(i){if(g.isDefinedAndNotNull(i)){return i.supportsEl===true}else{return false}},formatUnorderedList:function(j){if(f.isArray(j)){var i=f('<ul class="result"></ul>');f.each(j,function(l,m){var k=f("<li></li>").appendTo(i);if(m instanceof jQuery){k.append(m)}else{k.text(m)}});return i}else{return null}},substringAfterLast:function(m,l){var j="";var k=m.lastIndexOf(l);if(k>=0){var i=k+l.length;if(i<m.length){j=m.substr(i)}}return j},substringAfterFirst:function(m,l){var j="";var k=m.indexOf(l);if(k>=0){var i=k+l.length;if(i<m.length){j=m.substr(i)}}return j},substringBeforeLast:function(l,k){var i="";var j=l.lastIndexOf(k);if(j>=0){i=l.substr(0,j)}return i},substringBeforeFirst:function(l,k){var i="";var j=l.indexOf(k);if(j>=0){i=l.substr(0,j)}return i},setCursor:function(j,i){if(i){f("#"+j).addClass("pointer")}else{f("#"+j).removeClass("pointer")}},getAccessToken:function(i){return f.Deferred(function(j){if(c.hasItem("jwt")){f.ajax({type:"POST",url:i}).done(function(k){j.resolve(k)}).fail(function(){j.reject()})}else{j.resolve("")}}).promise()},MILLIS_PER_DAY:86400000,MILLIS_PER_HOUR:3600000,MILLIS_PER_MINUTE:60000,MILLIS_PER_SECOND:1000,loadBalanceStrategyOptions:[{text:"Do not load balance",value:"DO_NOT_LOAD_BALANCE",description:"Do not load balance FlowFiles between nodes in the cluster."},{text:"Partition by attribute",value:"PARTITION_BY_ATTRIBUTE",description:"Determine which node to send a given FlowFile to based on the value of a user-specified FlowFile Attribute. All FlowFiles that have the same value for said Attribute will be sent to the same node in the cluster."},{text:"Round robin",value:"ROUND_ROBIN",description:"FlowFiles will be distributed to nodes in the cluster in a Round-Robin fashion."},{text:"Single node",value:"SINGLE_NODE",description:"All FlowFiles will be sent to the same node. Which node they are sent to is not defined."}],loadBalanceCompressionOptions:[{text:"Do not compress",value:"DO_NOT_COMPRESS",description:"FlowFiles will not be compressed"},{text:"Compress attributes only",value:"COMPRESS_ATTRIBUTES_ONLY",description:"FlowFiles' attributes will be compressed, but the FlowFiles' contents will not be"},{text:"Compress attributes and content",value:"COMPRESS_ATTRIBUTES_AND_CONTENT",description:"FlowFiles' attributes and content will be compressed"}],formatDuration:function(l){l=l<1?0:l;var n=l/g.MILLIS_PER_DAY;n=n>=1?parseInt(n,10):0;l%=g.MILLIS_PER_DAY;var i=l/g.MILLIS_PER_HOUR;i=i>=1?parseInt(i,10):0;l%=g.MILLIS_PER_HOUR;var j=l/g.MILLIS_PER_MINUTE;j=j>=1?parseInt(j,10):0;l%=g.MILLIS_PER_MINUTE;var m=l/g.MILLIS_PER_SECOND;m=m>=1?parseInt(m,10):0;l=Math.floor(l%g.MILLIS_PER_SECOND);var k=g.pad(i,2,"0")+":"+g.pad(j,2,"0")+":"+g.pad(m,2,"0")+"."+g.pad(l,3,"0");if(n>0){return n+" days and "+k}else{return k}},formatPredictedDuration:function(i){if(i===0){return"now"}return h.duration(i,"ms").humanize()},BYTES_IN_KILOBYTE:1024,BYTES_IN_MEGABYTE:1048576,BYTES_IN_GIGABYTE:1073741824,BYTES_IN_TERABYTE:1099511627776,formatDataSize:function(j){var i=parseFloat(j/g.BYTES_IN_TERABYTE);if(i>1){return i.toFixed(2)+" TB"}i=parseFloat(j/g.BYTES_IN_GIGABYTE);if(i>1){return i.toFixed(2)+" GB"}i=parseFloat(j/g.BYTES_IN_MEGABYTE);if(i>1){return i.toFixed(2)+" MB"}i=parseFloat(j/g.BYTES_IN_KILOBYTE);if(i>1){return i.toFixed(2)+" KB"}return parseFloat(j).toFixed(2)+" bytes"},formatInteger:function(j){var i=j+"";var k=/(\d+)(\d{3})/;while(k.test(i)){i=i.replace(k,"$1,$2")}return g.escapeHtml(i)},formatFloat:function(i){if(g.isUndefinedOrNull(i)){return 0+""}return i.toFixed(2)+""},pad:function(l,j,k){var i=l+"";while(i.length<j){i=k+i}return i},formatDateTime:function(i){return g.pad(i.getMonth()+1,2,"0")+"/"+g.pad(i.getDate(),2,"0")+"/"+g.pad(i.getFullYear(),2,"0")+" "+g.pad(i.getHours(),2,"0")+":"+g.pad(i.getMinutes(),2,"0")+":"+g.pad(i.getSeconds(),2,"0")+"."+g.pad(i.getMilliseconds(),3,"0")},parseDateTime:function(m){if(!g.isDefinedAndNotNull(m)){return new Date()}if(m==="No value set"){return new Date()}if(m==="Empty string set"){return new Date()}var t=m.split(/ /);if(t.length!==3){return new Date()}var j=t[0].split(/\//);var i=t[1].split(/:/);if(j.length!==3||i.length!==3){return new Date()}var o=parseInt(j[2],10);var n=parseInt(j[0],10)-1;var p=parseInt(j[1],10);var q=parseInt(i[0],10);var l=parseInt(i[1],10);var s=i[2].split(/\./);var r=parseInt(s[0],10);var k=0;if(s.length===2){k=parseInt(s[1],10)}return new Date(o,n,p,q,l,r,k)},parseDuration:function(i){var j=i.split(/:/);if(j.length!==3){return 0}var k=j[2].split(/\./);if(k.length===2){return new Date(1970,0,1,parseInt(j[0],10),parseInt(j[1],10),parseInt(k[0],10),parseInt(k[1],10)).getTime()}else{return new Date(1970,0,1,parseInt(j[0],10),parseInt(j[1],10),parseInt(j[2],10),0).getTime()}},parseSize:function(k){var l=k.split(/ /);var j=parseFloat(l[0].replace(/,/g,""));var i=l[1];if(i==="KB"){return j*1024}else{if(i==="MB"){return j*1024*1024}else{if(i==="GB"){return j*1024*1024*1024}else{if(i==="TB"){return j*1024*1024*1024*1024}else{return j}}}}},parseCount:function(k){var j=k.split(/ /,1);if(j.length!==1){return 0}var i=parseInt(j[0].replace(/,/g,""),10);if(isNaN(i)){return 0}return i},isDefinedAndNotNull:function(i){return !g.isUndefined(i)&&!g.isNull(i)},isUndefinedOrNull:function(i){return g.isUndefined(i)||g.isNull(i)},isUndefined:function(i){return typeof i==="undefined"},isBlank:function(i){return g.isUndefined(i)||g.isNull(i)||f.trim(i)===""},isNull:function(i){return i===null},isEmpty:function(i){return f.isArray(i)?i.length===0:true},doBulletinsDiffer:function(k,l){if(f.isArray(k)&&f.isArray(l)){if(k.length===l.length){for(var j=0;j<k.length;j++){if(k[j].id!==l[j].id||k[j].canRead!==l[j].canRead){return true}}}else{return true}}else{if(f.isArray(k)||f.isArray(l)){return true}}return false},getFormattedBulletins:function(j){var i=[];f.each(j,function(l,m){if(m.canRead===true){var k=m.bulletin;var p="";if(g.isDefinedAndNotNull(k.nodeAddress)){p="-&nbsp;"+g.escapeHtml(k.nodeAddress)+"&nbsp;-&nbsp;"}var o=f("<pre></pre>").css({"white-space":"pre-wrap"}).text(k.message);var n=f("<div>"+g.escapeHtml(k.timestamp)+"&nbsp;"+p+"&nbsp;<b>"+g.escapeHtml(k.level)+"</b>&nbsp;</div>").append(o);i.push(n)}});return i},getFormattedServiceApis:function(j){var i=[];f.each(j,function(m,n){var k=g.formatType({type:n.type,bundle:n.bundle});var l=g.formatBundle(n.bundle);i.push(f("<div></div>").text(k+" from "+l))});return i},getFormattedGarbageCollections:function(j){j.sort(function(l,k){return k.collectionCount-l.collectionCount});var i=[];f.each(j,function(m,k){var l=f('<span style="font-weight: bold;"></span>').text(k.name);var n=f("<span></span>").text(" - "+k.collectionCount+" times ("+k.collectionTime+")");var o=f("<div></div>").append(l).append(n);i.push(o)});return i},isGlobalPolicy:function(i){return g.getPolicyTypeListing(i)!==null},getPolicyTypeListing:function(i){return a.find(function(j){return i===j.value})},getComponentName:function(i){return i.permissions.canRead===true?i.component.name:i.id},getComboOptionText:function(i,k){var j=i.find(function(l){return l.value===k});return g.isDefinedAndNotNull(j)?j.text:undefined},throttle:function(i,j){return b.throttle(i,j)},getKeyValue:function(j,i){return i.split(".").reduce(function(l,k){return(typeof l===undefined||l===null)?l:(typeof l[k]=="function")?l[k]():l[k]},j)}};return g}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Dialog","nf.Common"],function(d,c,e){return(nf.ErrorHandler=b(d,c,e))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ErrorHandler=b(require("jquery"),require("nf.Dialog"),require("nf.Common")))}else{nf.ErrorHandler=b(a.$,a.nf.Dialog,a.nf.Common)}}}(this,function(c,b,d){var a={handleAjaxError:function(h,e,f){if(e==="canceled"){if(c("#splash").is(":visible")){c("#message-title").text("Session Expired");c("#message-content").text("Your session has expired. Please reload to log in again.");c("#message-pane").show()}else{b.showOkDialog({headerText:"Session Expired",dialogContent:"Your session has expired. Please press Ok to log in again.",okHandler:function(){window.location="/nifi"}})}return}if(c("#splash").is(":visible")){if(h.status===401){c("#message-title").text("Unauthorized")}else{if(h.status===403){c("#message-title").text("Insufficient Permissions")}else{if(h.status===409){c("#message-title").text("Invalid State")}else{c("#message-title").text("An unexpected error has occurred")}}}if(c.trim(h.responseText)===""){c("#message-content").text("Please check the logs.")}else{c("#message-content").text(h.responseText)}c("#message-pane").show();return}if(h.status===400||h.status===404||h.status===409||h.status===503){b.showOkDialog({headerText:"Error",dialogContent:d.escapeHtml(h.responseText)})}else{if(h.status===403){b.showOkDialog({headerText:"Insufficient Permissions",dialogContent:d.escapeHtml(h.responseText)})}else{if(h.status<99||h.status===12007||h.status===12029){var g="Please ensure the application is running and check the logs for any errors.";if(d.isDefinedAndNotNull(e)){if(e==="timeout"){g="Request has timed out. Please ensure the application is running and check the logs for any errors."}else{if(e==="abort"){g="Request has been aborted."}else{if(e==="No Transport"){g="Request transport mechanism failed. Please ensure the host where the application is running is accessible."}}}}c("#message-title").text("Unable to communicate with NiFi");c("#message-content").text(g)}else{if(h.status===401){c("#message-title").text("Unauthorized");if(c.trim(h.responseText)===""){c("#message-content").text("Authentication is required to use this NiFi.")}else{c("#message-content").text(h.responseText)}}else{if(h.status===500){c("#message-title").text("An unexpected error has occurred");if(c.trim(h.responseText)===""){c("#message-content").text("An error occurred communicating with the application core. Please check the logs and fix any configuration issues before restarting.")}else{c("#message-content").text(h.responseText)}}else{if(h.status===200||h.status===201){c("#message-title").text("Parse Error");if(c.trim(h.responseText)===""){c("#message-content").text("Unable to interpret response from NiFi.")}else{c("#message-content").text(h.responseText)}}else{c("#message-title").text(h.status+": Unexpected Response");c("#message-content").text("An unexpected error has occurred. Please check the logs.")}}}}c("#message-pane").show()}}},handleConfigurationUpdateAjaxError:function(h,e,f){if(h.status===400){var i=h.responseText.split("\n");var g;if(i.length===1){g=c("<span></span>").text(i[0])}else{g=d.formatUnorderedList(i)}b.showOkDialog({dialogContent:g,headerText:"Configuration Error"})}else{a.handleAjaxError(h,e,f)}}};return a}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return(nf.UniversalCapture=b(c))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.UniversalCapture=b(require("jquery")))}else{nf.UniversalCapture=b(a.$)}}}(this,function(b){b(document).ready(function(c){c(window).on("keydown",function(d){var i=d.ctrlKey||d.metaKey;if(!i&&d.keyCode===27){var g=c("div.value-combo");if(g.is(":visible")&&g.parent().hasClass("combo-editor")){return}if(c("div.property-detail").is(":visible")){a.removeAllPropertyDetailDialogs();d.stopImmediatePropagation();d.preventDefault()}else{var h=c(d.target);if(h.length){var j=c(".cancellable");if(j.length){var e=null;var f=null;c.each(j,function(k,m){var l=c(m);var n=l.css("zIndex");if(l.is(":visible")&&(n!==null&&typeof n!=="undefined")){n=parseInt(n,10);if(e===null||n>e){e=n;f=l}}});if(f!==null){if(f.hasClass("modal")){f.modal("hide")}else{f.hide()}d.stopImmediatePropagation();d.preventDefault();return}}if(top!==window){if(typeof parent.nf!=="undefined"&&typeof parent.nf.Shell!=="undefined"){parent.$("#shell-close-button").click();d.stopImmediatePropagation();d.preventDefault();return}}}}}else{if(i){if(d.keyCode===82){d.preventDefault()}}else{if(!c("input, textarea").is(":focus")&&(d.keyCode==8||d.keyCode===46)){d.preventDefault()}}}})});var a={removeAllPropertyDetailDialogs:function(){var c=b("body").find("div.property-detail");c.find("div.nf-editor").nfeditor("destroy");c.find("div.value-combo").combo("destroy");c.hide().remove()}};return a}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Storage"],function(d,c){return(nf.AjaxSetup=b(d,c))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.AjaxSetup=b(require("jquery"),require("nf.Storage")))}else{nf.AjaxSetup=b(a.$,a.nf.Storage)}}}(this,function(b,a){b(document).ready(function(c){c.ajaxSetup({beforeSend:function(f){var d=a.hasItem("jwt");var e=a.getItem("jwt");if(e!==null){f.setRequestHeader("Authorization","Bearer "+e)}else{if(d===true){return false}}}})})}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Common"],function(c,d){return(nf.Client=b(c,d))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.Client=b(require("jquery"),require("nf.Common")))}else{nf.Client=b(a.$,a.nf.Common)}}}(this,function(b,c){var a=null;return{init:function(){return b.ajax({type:"GET",url:"../nifi-api/flow/client-id",}).done(function(d){a=d})},getRevision:function(e){return{clientId:a,version:e.revision.version}},isNewerRevision:function(f,d){if(c.isDefinedAndNotNull(f)){var g=f.revision;var e=d.revision;return e.version>=g.version}else{return true}}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Common","nf.Shell","nf.Dialog","nf.Storage","nf.Client"],function(g,h,c,f,e,d){return(nf.CustomUi=b(g,h,c,f,e,d))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.CustomUi=b(require("jquery"),require("nf.Common"),require("nf.Shell"),require("nf.Dialog"),require("nf.Storage"),require("nf.Client")))}else{nf.CustomUi=b(a.$,a.nf.Common,a.nf.Shell,a.nf.Dialog,a.nf.Storage,a.nf.Client)}}}(this,function(e,f,a,d,c,b){return{showCustomUi:function(g,i,h){return e.Deferred(function(j){f.getAccessToken("../nifi-api/access/ui-extension-token").done(function(l){e("#shell-close-button");var k=b.getRevision(g);var m={id:g.id,revision:k.version,clientId:k.clientId,editable:h,disconnectedNodeAcknowledged:c.isDisconnectionAcknowledged()};if(!f.isBlank(l)){m.access_token=l}a.showPage(".."+i+"?"+e.param(m),false).done(function(){j.resolve()})}).fail(function(){d.showOkDialog({headerText:"Advanced Configuration",dialogContent:"Unable to generate access token for accessing the advanced configuration dialog."});j.resolve()})}).promise()}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return(nf.ClusterSummary=b(c))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ClusterSummary=b(require("jquery")))}else{nf.ClusterSummary=b(a.$)}}}(this,function(e){var d=false;var c=false;var f=false;var b=false;var a={urls:{clusterSummary:"../nifi-api/flow/cluster/summary"}};return{loadClusterSummary:function(){return e.ajax({type:"GET",url:a.urls.clusterSummary,dataType:"json"}).done(function(g){var h=g;var i=h.clusterSummary;if(d===true){if(f!==i.connectedToCluster){b=true}}else{if(i.clustered&&!i.connectedToCluster){b=true}}c=i.clustered;f=i.connectedToCluster;d=true})},isClustered:function(){return c===true},isConnectedToCluster:function(){return f===true},didConnectedStateChange:function(){var g=b;b=false;return g}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Common","nf.UniversalCapture","nf.Dialog","nf.ErrorHandler","nf.CustomUi","nf.ClusterSummary","nf.CanvasUtils"],function(g,h,j,f,i,e,c,d){return(nf.ProcessorDetails=b(g,h,j,f,i,e,c,d))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ProcessorDetails=b(require("jquery"),require("nf.Common"),require("nf.UniversalCapture"),require("nf.Dialog"),require("nf.ErrorHandler"),require("nf.CustomUi"),require("nf.ClusterSummary"),require("nf.CanvasUtils")))}else{nf.ProcessorDetails=b(a.$,a.nf.Common,a.nf.UniversalCapture,a.nf.Dialog,a.nf.ErrorHandler,a.nf.CustomUi,a.nf.ClusterSummary,a.nf.CanvasUtils)}}}(this,function(e,b,f,d,g,h,i,c){var a;var j=function(n){var k=e('<div class="relationship-name ellipsis"></div>').text(n.name);if(n.autoTerminate===true){k.css("font-weight","bold")}var m=e('<div class="processor-relationship-container"></div>').append(k).appendTo("#read-only-auto-terminate-relationship-names");if(!b.isBlank(n.description)){var l=e('<div class="relationship-description"></div>').text(n.description);m.append(l)}return m};return{init:function(k){a=k;e("#processor-details-tabs").tabbs({tabStyle:"tab",selectedTabStyle:"selected-tab",scrollableTabContentStyle:"scrollable",tabs:[{name:"Settings",tabContentId:"details-standard-settings-tab-content"},{name:"Scheduling",tabContentId:"details-scheduling-tab-content"},{name:"Properties",tabContentId:"details-processor-properties-tab-content"},{name:"Comments",tabContentId:"details-processor-comments-tab-content"}],select:function(){f.removeAllPropertyDetailDialogs();if(e(this).text()==="Properties"){e("#read-only-processor-properties").propertytable("resetTableSize")}var l=e("#read-only-auto-terminate-relationship-names");if(l.is(":visible")&&l.get(0).scrollHeight>Math.round(l.innerHeight())){l.css("border-width","1px")}}});e("#processor-details").modal({headerText:"Processor Details",scrollableContentStyle:"scrollable",handler:{close:function(){e("#read-only-auto-terminate-relationship-names").css("border-width","0").empty();e("#read-only-processor-properties").propertytable("clear");b.clearField("read-only-processor-id");b.clearField("read-only-processor-type");b.clearField("read-only-processor-name");b.clearField("read-only-concurrently-schedulable-tasks");b.clearField("read-only-scheduling-period");b.clearField("read-only-penalty-duration");b.clearField("read-only-yield-duration");b.clearField("read-only-run-duration");b.clearField("read-only-bulletin-level");b.clearField("read-only-execution-node");b.clearField("read-only-execution-status");b.clearField("read-only-processor-comments");e("#processor-details").removeData("processorDetails");e("#processor-details").removeData("processorHistory");if(a.supportsStatusBar){e("#processor-details-status-bar").statusbar("disconnect")}},open:function(){b.toggleScrollable(e("#"+this.find(".tab-container").attr("id")+"-content").get(0))}}});if(a.supportsStatusBar){e("#processor-details-status-bar").statusbar()}e("#read-only-processor-properties").propertytable({supportsGoTo:a.supportsGoTo,readOnly:true,getParameterContext:function(l){return c.getParameterContext()}})},showDetails:function(m,n){var l=e.ajax({type:"GET",url:"../nifi-api/processors/"+encodeURIComponent(n),dataType:"json"}).done(function(p){if(b.isDefinedAndNotNull(p.component)){var q=p.component;e("#processor-details").data("processorDetails",q);b.populateField("read-only-processor-id",q.id);b.populateField("read-only-processor-type",b.formatType(q));b.populateField("read-only-processor-bundle",b.formatBundle(q.bundle));b.populateField("read-only-processor-name",q.name);b.populateField("read-only-concurrently-schedulable-tasks",q.config.concurrentlySchedulableTaskCount);b.populateField("read-only-scheduling-period",q.config.schedulingPeriod);b.populateField("read-only-penalty-duration",q.config.penaltyDuration);b.populateField("read-only-yield-duration",q.config.yieldDuration);b.populateField("read-only-run-duration",b.formatDuration(q.config.runDurationMillis));b.populateField("read-only-bulletin-level",q.config.bulletinLevel);b.populateField("read-only-processor-comments",q.config.comments);var o=true;var s=q.config.schedulingStrategy;if(s==="EVENT_DRIVEN"){o=false;s="Event driven"}else{if(s==="CRON_DRIVEN"){s="CRON driven"}else{if(s==="TIMER_DRIVEN"){s="Timer driven"}else{s="On primary node"}}}b.populateField("read-only-scheduling-strategy",s);if(o===true){e("#read-only-run-schedule").show()}else{e("#read-only-run-schedule").hide()}var r=q.config.executionNode;if(r==="ALL"){r="All nodes"}else{if(r==="PRIMARY"){r="Primary node only"}}b.populateField("read-only-execution-node",r);e("#read-only-execution-node-options").show();if(!b.isEmpty(q.relationships)){e.each(q.relationships,function(t,u){j(u)})}else{e("#read-only-auto-terminate-relationship-names").append('<div class="unset">This processor has no relationships.</div>')}}});var k=e.ajax({type:"GET",url:"../nifi-api/flow/history/components/"+encodeURIComponent(n),dataType:"json"}).done(function(o){var p=o.componentHistory;e("#processor-details").data("processorHistory",p)});e.when(l,k).done(function(t,x){var u=t[0];var p=u.component;var w=x[0];var r=w.componentHistory;var v;e("#read-only-processor-properties").propertytable("loadProperties",p.config.properties,p.config.descriptors,r.propertyHistory);var s=[{buttonText:"Ok",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){e("#processor-details").modal("hide")}}}];if(top===window&&b.isDefinedAndNotNull(h)&&b.isDefinedAndNotNull(p.config.customUiUrl)&&p.config.customUiUrl!==""){s.push({buttonText:"Advanced",clazz:"fa fa-cog button-icon",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){e("#processor-details").modal("hide");h.showCustomUi(u,p.config.customUiUrl,false)}}})}if(a.supportsStatusBar&&b.isDefinedAndNotNull(a.nfCanvasUtils)){e("#processor-details-status-bar").statusbar("observe",p.id);v=a.nfCanvasUtils.getSelectionById(p.id);if(b.isDefinedAndNotNull(a.nfActions)&&a.nfCanvasUtils.isProcessor(v)&&a.nfCanvasUtils.canModify(v)){var q=function(){var y=e("#processor-details-tabs").find(".selected-tab").text();e("#processor-configuration-tabs").find('.tab:contains("'+y+'")').trigger("click");e("#processor-details").modal("hide");e("#processor-details-status-bar").statusbar("showButtons")};e("#processor-details-status-bar").statusbar("buttons",[{buttonHtml:'<i class="fa fa-stop stop-configure-icon" aria-hidden="true"></i><span>Stop & Configure</span>',clazz:"button button-icon auto-width",color:{hover:"#C7D2D7",base:"transparent",text:"#004849"},disabled:function(){return !a.nfCanvasUtils.isStoppable(v)},handler:{click:function(){e("#processor-details-status-bar").statusbar("hideButtons");a.nfActions.stopAndConfigure(v,q)}}},{buttonText:"Configure",clazz:"fa fa-cog button-icon",color:{hover:"#C7D2D7",base:"transparent",text:"#004849"},disabled:function(){return a.nfCanvasUtils.isStoppable(v)},handler:{click:function(){e("#processor-details-status-bar").statusbar("hideButtons");a.nfActions.showConfiguration(v,q)}}}])}}e("#processor-details").modal("setButtonModel",s).modal("show");e("#processor-details div.relationship-name").ellipsis();var o=e("#read-only-auto-terminate-relationship-names");if(o.is(":visible")&&o.get(0).scrollHeight>Math.round(o.innerHeight())){o.css("border-width","1px")}}).fail(g.handleAjaxError)}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","Slick","d3","nf.Client","nf.Dialog","nf.Storage","nf.Common","nf.CanvasUtils","nf.ControllerServices","nf.ErrorHandler","nf.FilteredDialogCommon","nf.ReportingTask","nf.Shell","nf.ComponentState","nf.ComponentVersion","nf.PolicyManagement"],function(j,f,q,r,i,k,g,h,d,m,l,n,e,p,c,o){return(nf.Settings=b(j,f,q,r,i,k,g,h,d,m,l,n,e,p,c,o))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.Settings=b(require("jquery"),require("Slick"),require("d3"),require("nf.Client"),require("nf.Dialog"),require("nf.Storage"),require("nf.Common"),require("nf.CanvasUtils"),require("nf.ControllerServices"),require("nf.ErrorHandler"),require("nf.FilteredDialogCommon"),require("nf.ReportingTask"),require("nf.Shell"),require("nf.ComponentState"),require("nf.ComponentVersion"),require("nf.PolicyManagement")))}else{nf.Settings=b(a.$,a.Slick,a.d3,a.nf.Client,a.nf.Dialog,a.nf.Storage,a.nf.Common,a.nf.CanvasUtils,a.nf.ControllerServices,a.nf.ErrorHandler,a.nf.FilteredDialogCommon,a.nf.ReportingTask,a.nf.Shell,a.nf.ComponentState,a.nf.ComponentVersion,a.nf.PolicyManagement)}}}(this,function(A,a,O,i,k,s,M,T,H,d,R,B,K,e,t,w){var F={urls:{api:"../nifi-api",controllerConfig:"../nifi-api/controller/config",reportingTaskTypes:"../nifi-api/flow/reporting-task-types",createReportingTask:"../nifi-api/controller/reporting-tasks",reportingTasks:"../nifi-api/flow/reporting-tasks",registries:"../nifi-api/controller/registry-clients"}};var z={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var r=function(){return A("#controller-services-table")};var Q=function(Y){var X=[];if(M.isDefinedAndNotNull(Y.maxTimerDrivenThreadCount)&&!A.isNumeric(Y.maxTimerDrivenThreadCount)){X.push("Maximum Timer Driven Thread Count must be an integer value")}if(M.isDefinedAndNotNull(Y.maxEventDrivenThreadCount)&&!A.isNumeric(Y.maxEventDrivenThreadCount)){X.push("Maximum Event Driven Thread Count must be an integer value")}if(X.length>0){k.showOkDialog({dialogContent:M.formatUnorderedList(X),headerText:"Configuration Error"});return false}else{return true}};var m=function(X){var Z=S();if(Q(Z)){var Y={revision:i.getRevision({revision:{version:X}}),disconnectedNodeAcknowledged:s.isDisconnectionAcknowledged(),component:Z};A.ajax({type:"PUT",url:F.urls.controllerConfig,data:JSON.stringify(Y),dataType:"json",contentType:"application/json"}).done(function(aa){k.showOkDialog({headerText:"Settings",dialogContent:"Settings successfully applied."});A("#settings-save").off("click").on("click",function(){m(aa.revision.version)})}).fail(d.handleConfigurationUpdateAjaxError)}};var j=function(){};var S=function(){var X={};X.maxTimerDrivenThreadCount=A("#maximum-timer-driven-thread-count-field").val();X.maxEventDrivenThreadCount=A("#maximum-event-driven-thread-count-field").val();return X};var W=function(Z,Y){if(Y.searchString===""){return true}try{var ac=new RegExp(Y.searchString,"i")}catch(ab){return false}var aa=Z.label.search(ac)>=0;var X=Z.tags.search(ac)>=0;return aa||X};var o=function(Z,X){var Y=[];A.each(Z,function(ac,ad){Y.push(ad)});var aa=X.toLowerCase();var ab=true;A.each(Y,function(ac,ad){if(aa.indexOf(ad)===-1){ab=false;return false}});return ab};var n=function(X){return X.restricted===false||M.canAccessComponentRestrictions(X.explicitRestrictions)};var v=function(ab,Y,aa,Z,X){if(!X.permissions.canRead){return'<span class="blank">'+M.escapeHtml(X.id)+"</span>"}return M.escapeHtml(X.component.name)};var U=function(X,Z){var Y=function(ah,ag){if(ah.permissions.canRead&&ag.permissions.canRead){if(X.columnId==="moreDetails"){var ad=0;if(!M.isEmpty(ah.bulletins)){ad=ah.bulletins.length}var aa=0;if(!M.isEmpty(ag.bulletins)){aa=ag.bulletins.length}return ad-aa}else{if(X.columnId==="type"){var ae=M.isDefinedAndNotNull(ah.component[X.columnId])?M.substringAfterLast(ah.component[X.columnId],"."):"";var ac=M.isDefinedAndNotNull(ag.component[X.columnId])?M.substringAfterLast(ag.component[X.columnId],"."):"";return ae===ac?0:ae>ac?1:-1}else{if(X.columnId==="state"){var af;if(ah.component.validationStatus==="VALIDATING"){af="Validating"}else{if(ah.component.validationStatus==="INVALID"){af="Invalid"}else{af=M.isDefinedAndNotNull(ah.component[X.columnId])?ah.component[X.columnId]:""}}var aj;if(ag.component.validationStatus==="VALIDATING"){aj="Validating"}else{if(ag.component.validationStatus==="INVALID"){aj="Invalid"}else{aj=M.isDefinedAndNotNull(ag.component[X.columnId])?ag.component[X.columnId]:""}}return af===aj?0:af>aj?1:-1}else{var ab=M.isDefinedAndNotNull(ah.component[X.columnId])?ah.component[X.columnId]:"";var ai=M.isDefinedAndNotNull(ag.component[X.columnId])?ag.component[X.columnId]:"";return ab===ai?0:ab>ai?1:-1}}}}else{if(!ah.permissions.canRead&&!ag.permissions.canRead){return 0}if(ah.permissions.canRead){return 1}else{return -1}}};Z.sort(Y,X.sortAsc)};var C=function(){return A("#reporting-task-type-filter").val()};var p=function(){var Y=A("#reporting-task-types-table").data("gridInstance");if(M.isDefinedAndNotNull(Y)){var X=Y.getData();X.setFilterArgs({searchString:C()});X.refresh();A("#new-reporting-task-dialog").modal("refreshButtons");if(X.getLength()>0){R.choseFirstRow(Y)}}};var P=function(){A("#reporting-task-type-description").attr("title","").text("");A("#reporting-task-type-name").attr("title","").text("");A("#reporting-task-type-bundle").attr("title","").text("");A("#selected-reporting-task-name").text("");A("#selected-reporting-task-type").text("").removeData("bundle");A("#reporting-task-description-container").hide()};var h=function(){P();var X=A("#reporting-task-types-table").data("gridInstance");X.resetActiveCell()};var I=function(af,aa){var ad=W(af,aa);var Z=true;if(ad){var ae=A("#reporting-task-tag-cloud").tagcloud("getSelectedTags");var ac=ae.length>0;if(ac){Z=o(ae,af.tags)}}var ab=true;if(ad&&Z){var X=A("#reporting-task-bundle-group-combo").combo("getSelectedOption");if(M.isDefinedAndNotNull(X)&&X.value!==""){ab=(af.bundle.group===X.value)}}var Y=ad&&Z&&ab;if(Y===false&&A("#selected-reporting-task-type").text()===af.type){h()}return Y};var L=function(){var Y=A("#selected-reporting-task-type").text();var X=A("#selected-reporting-task-type").data("bundle");if(Y===""){k.showOkDialog({headerText:"Settings",dialogContent:"The type of reporting task to create must be selected."})}else{l(Y,X)}};var l=function(X,Z){var aa={revision:i.getRevision({revision:{version:0}}),disconnectedNodeAcknowledged:s.isDisconnectionAcknowledged(),component:{type:X,bundle:Z}};var Y=A.ajax({type:"POST",url:F.urls.createReportingTask,data:JSON.stringify(aa),dataType:"json",contentType:"application/json"}).done(function(ac){var ae=A("#reporting-tasks-table").data("gridInstance");var ab=ae.getData();ab.addItem(A.extend({type:"ReportingTask",bulletins:[]},ac));ab.reSort();ae.invalidate();var ad=ab.getRowById(ac.id);R.choseRow(ae,ad);ae.scrollRowIntoView(ad)}).fail(d.handleAjaxError);A("#new-reporting-task-dialog").modal("hide");return Y};var f=function(){var X={revision:i.getRevision({revision:{version:0}}),disconnectedNodeAcknowledged:s.isDisconnectionAcknowledged(),component:{name:A("#registry-name").val(),uri:A("#registry-location").val(),description:A("#registry-description").val()}};var Y=A.ajax({type:"POST",url:F.urls.registries,data:JSON.stringify(X),dataType:"json",contentType:"application/json"}).done(function(ac){var Z=A("#registries-table").data("gridInstance");var aa=Z.getData();aa.addItem(A.extend({type:"Registry"},ac));aa.reSort();Z.invalidate();var ab=aa.getRowById(ac.id);R.choseRow(Z,ab);Z.scrollRowIntoView(ab);A("#registry-configuration-dialog").modal("hide")}).fail(d.handleConfigurationUpdateAjaxError);return Y};var y=function(ab){var Y=A("#registries-table").data("gridInstance");var Z=Y.getData();var ac=Z.getItemById(ab);var aa={revision:i.getRevision(ac),disconnectedNodeAcknowledged:s.isDisconnectionAcknowledged(),component:{id:ab,name:A("#registry-name").val(),uri:A("#registry-location").val(),description:A("#registry-description").val()}};var X=A.ajax({type:"PUT",url:ac.uri,data:JSON.stringify(aa),dataType:"json",contentType:"application/json"}).done(function(ad){Z.updateItem(ab,A.extend({type:"Registry"},ad));A("#registry-configuration-dialog").modal("hide")}).fail(d.handleConfigurationUpdateAjaxError);return X};var g=function(){var Y=[{id:"type",name:"Type",field:"label",formatter:M.typeFormatter,sortable:true,resizable:true},{id:"version",name:"Version",field:"version",formatter:M.typeVersionFormatter,sortable:true,resizable:true},{id:"tags",name:"Tags",field:"tags",sortable:true,resizable:true,formatter:M.genericValueFormatter}];var X=new a.Data.DataView({inlineFilters:false});X.setItems([]);X.setFilterArgs({searchString:C()});X.setFilter(I);M.sortType({columnId:"type",sortAsc:true},X);var ab=new a.Grid("#reporting-task-types-table",X,Y,z);ab.setSelectionModel(new a.RowSelectionModel());ab.registerPlugin(new a.AutoTooltips());ab.setSortColumn("type",true);ab.onSort.subscribe(function(ad,ac){M.sortType({columnId:ac.sortCol.field,sortAsc:ac.sortAsc},X)});ab.onSelectedRowsChanged.subscribe(function(ah,ae){if(A.isArray(ae.rows)&&ae.rows.length===1){var ag=ae.rows[0];var ac=ab.getDataItem(ag);if(M.isDefinedAndNotNull(ac)){A("#reporting-task-description-container").show();if(M.isBlank(ac.description)){A("#reporting-task-type-description").attr("title","").html('<span class="unset">No description specified</span>')}else{A("#reporting-task-type-description").width(A("#reporting-task-description-container").innerWidth()-1).html(ac.description).ellipsis()}var ad=M.formatBundle(ac.bundle);var af=M.formatType(ac);A("#reporting-task-type-name").text(af).attr("title",af);A("#reporting-task-type-bundle").text(ad).attr("title",ad);A("#selected-reporting-task-name").text(ac.label);A("#selected-reporting-task-type").text(ac.type).data("bundle",ac.bundle);A("#new-reporting-task-dialog").modal("refreshButtons")}}});ab.onDblClick.subscribe(function(ae,ad){var ac=ab.getDataItem(ad.row);if(n(ac)){l(ac.type,ac.bundle)}});ab.onViewportChanged.subscribe(function(ad,ac){M.cleanUpTooltips(A("#reporting-task-types-table"),"div.view-usage-restriction")});X.onRowCountChanged.subscribe(function(ad,ac){ab.updateRowCount();ab.render();A("#displayed-reporting-task-types").text(ac.current)});X.onRowsChanged.subscribe(function(ad,ac){ab.invalidateRows(ac.rows);ab.render()});X.syncGridSelection(ab,true);A("#reporting-task-types-table").data("gridInstance",ab).on("mouseenter","div.slick-cell",function(af){var ag=A(this).find("div.view-usage-restriction");if(ag.length&&!ag.data("qtip")){var ae=A(this).find("span.row-id").text();var ad=X.getItemById(ae);if(ad.restricted===true){var ah=A("<div></div>");if(M.isBlank(ad.usageRestriction)){ah.append(A('<p style="margin-bottom: 3px;"></p>').text("Requires the following permissions:"))}else{ah.append(A('<p style="margin-bottom: 3px;"></p>').text(ad.usageRestriction+" Requires the following permissions:"))}var ac=[];if(M.isDefinedAndNotNull(ad.explicitRestrictions)){A.each(ad.explicitRestrictions,function(ai,ak){var aj=ak.requiredPermission;ac.push("'"+aj.label+"' - "+M.escapeHtml(ak.explanation))})}else{ac.push("Access to restricted components regardless of restrictions.")}ah.append(M.formatUnorderedList(ac));ag.qtip(A.extend({},M.config.tooltipConfig,{content:ah,position:{container:A("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});var aa=M.getPolicyTypeListing("restricted-components");A.ajax({type:"GET",url:F.urls.reportingTaskTypes,dataType:"json"}).done(function(ad){var ai=0;var af=[];var ac=O.set();var ah=O.map();var ag=O.map();X.beginUpdate();A.each(ad.reportingTaskTypes,function(aj,ak){if(ak.restricted===true){if(M.isDefinedAndNotNull(ak.explicitRestrictions)){A.each(ak.explicitRestrictions,function(al,an){var am=an.requiredPermission;if(!ag.has(am.id)){ag.set(am.id,am.label)}if(!ah.has(am.id)){ah.set(am.id,[])}ah.get(am.id).push({type:M.formatType(ak),bundle:M.formatBundle(ak.bundle),explanation:M.escapeHtml(an.explanation)})})}else{if(!ag.has(aa.value)){ag.set(aa.value,aa.text)}if(!ah.has(aa.value)){ah.set(aa.value,[])}ah.get(aa.value).push({type:M.formatType(ak),bundle:M.formatBundle(ak.bundle),explanation:M.escapeHtml(ak.usageRestriction)})}}ac.add(ak.bundle.group);X.addItem({id:ai++,label:M.substringAfterLast(ak.type,"."),type:ak.type,bundle:ak.bundle,description:M.escapeHtml(ak.description),restricted:ak.restricted,usageRestriction:M.escapeHtml(ak.usageRestriction),explicitRestrictions:ak.explicitRestrictions,tags:ak.tags.join(", ")});A.each(ak.tags,function(am,al){af.push(al.toLowerCase())})});X.endUpdate();X.reSort();ab.invalidate();T.addComponentRestrictions(ah,ag);A("#total-reporting-task-types, #displayed-reporting-task-types").text(ad.reportingTaskTypes.length);A("#reporting-task-tag-cloud").tagcloud({tags:af,select:p,remove:p});var ae=[{text:"all groups",value:""}];ac.each(function(aj){ae.push({text:aj,value:aj})});A("#reporting-task-bundle-group-combo").combo({options:ae,select:p})}).fail(d.handleAjaxError);var Z=[A.ui.keyCode.UP,A.ui.keyCode.PAGE_UP,A.ui.keyCode.DOWN,A.ui.keyCode.PAGE_DOWN];A("#reporting-task-type-filter").off("keyup").on("keyup",function(af){var ae=af.keyCode?af.keyCode:af.which;if(A.inArray(ae,Z)!==-1){return}if(ae===A.ui.keyCode.ENTER){var ac=ab.getSelectedRows();if(ac.length>0){var ad=ab.getDataItem(ac[0]);if(n(ad)){L()}}}else{p()}});R.addKeydownListener("#reporting-task-type-filter",ab,ab.getData());A("#new-reporting-task-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Add Reporting Task",buttons:[{buttonText:"Add",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},disabled:function(){var ac=ab.getSelectedRows();if(ac.length>0){var ad=ab.getDataItem(ac[0]);return n(ad)===false}else{return ab.getData().getLength()===0}},handler:{click:function(){L()}}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){A(this).modal("hide")}}}],handler:{close:function(){P();A("#reporting-task-type-filter").val("");A("#reporting-task-tag-cloud").tagcloud("clearSelectedTags");A("#reporting-task-bundle-group-combo").combo("setSelectedOption",{value:""});p();var ac=A("#reporting-task-types-table").data("gridInstance");ac.setSelectedRows([]);ac.resetActiveCell()},resize:function(){A("#reporting-task-type-description").width(A("#reporting-task-description-container").innerWidth()-1).text(A("#reporting-task-type-description").attr("title")).ellipsis()}}});A("#registry-configuration-dialog").modal({scrollableContentStyle:"scrollable",handler:{close:function(){A("#registry-id").text("");A("#registry-name").val("");A("#registry-location").val("");A("#registry-description").val("")}}})};var c=function(){g();var ab=function(ak,ae,aj,ag,ad){if(!ad.permissions.canRead){return""}var af='<div title="View Details" class="pointer view-reporting-task fa fa-info-circle"></div>';af+='<div title="Usage" class="pointer reporting-task-usage fa fa-book"></div>';var ah=!M.isEmpty(ad.component.validationErrors);var ai=!M.isEmpty(ad.bulletins);if(ah){af+='<div class="pointer has-errors fa fa-warning" ></div>'}if(ai){af+='<div class="has-bulletins fa fa-sticky-note-o"></div>'}if(ah||ai){af+='<span class="hidden row-id">'+M.escapeHtml(ad.component.id)+"</span>"}return af};var ac=function(al,ak,aj,af,ad){var ah="",ai="";if(ad.status.validationStatus==="VALIDATING"){ah="validating fa fa-spin fa-circle-notch";ai="Validating"}else{if(ad.status.validationStatus==="INVALID"){ah="invalid fa fa-warning";ai="Invalid"}else{if(ad.status.runStatus==="STOPPED"){ai="Stopped";ah="fa fa-stop stopped"}else{if(ad.status.runStatus==="RUNNING"){ai="Running";ah="fa fa-play running"}else{ai="Disabled";ah="icon icon-enable-false disabled"}}}}var ag="";if(M.isDefinedAndNotNull(ad.status.activeThreadCount)&&ad.status.activeThreadCount>0){ag="("+ad.status.activeThreadCount+")"}var ae='<div layout="row"><div class="'+ah+'"></div>';return ae+'<div class="status-text">'+M.escapeHtml(ai)+'</div><div style="float: left; margin-left: 4px;">'+M.escapeHtml(ag)+"</div></div>"};var aa=function(am,ak,ai,ah,ad){var al="";var ae=ad.permissions.canWrite;var ag=ad.permissions.canRead;var aj=ad.operatePermissions.canWrite||ae;var af=ad.status.runStatus==="STOPPED";if(ad.status.runStatus==="RUNNING"){if(aj){al+='<div title="Stop" class="pointer stop-reporting-task fa fa-stop"></div>'}}else{if(af||ad.status.runStatus==="DISABLED"){if(ag&&ae){al+='<div title="Edit" class="pointer edit-reporting-task fa fa-pencil"></div>'}if(aj&&ad.status.runStatus==="STOPPED"&&ad.status.validationStatus==="VALID"){al+='<div title="Start" class="pointer start-reporting-task fa fa-play"></div>'}if(ag&&ae&&ad.component.multipleVersionsAvailable===true){al+='<div title="Change Version" class="pointer change-version-reporting-task fa fa-exchange"></div>'}if(ag&&ae&&M.canModifyController()){al+='<div title="Remove" class="pointer delete-reporting-task fa fa-trash"></div>'}}}if(ag&&ae&&ad.component.persistsState===true){al+='<div title="View State" class="pointer view-state-reporting-task fa fa-tasks"></div>'}if(T.isManagedAuthorizer()&&M.canAccessTenants()){al+='<div title="Access Policies" class="pointer edit-access-policies fa fa-key"></div>'}return al};var X=[{id:"moreDetails",name:"&nbsp;",resizable:false,formatter:ab,sortable:true,width:90,maxWidth:90,toolTip:"Sorts based on presence of bulletins"},{id:"name",name:"Name",sortable:true,resizable:true,formatter:v},{id:"type",name:"Type",formatter:M.instanceTypeFormatter,sortable:true,resizable:true},{id:"bundle",name:"Bundle",formatter:M.instanceBundleFormatter,sortable:true,resizable:true},{id:"state",name:"Run Status",sortable:true,resizeable:true,formatter:ac}];X.push({id:"actions",name:"&nbsp;",resizable:false,formatter:aa,sortable:false,width:90,maxWidth:90});var Z=new a.Data.DataView({inlineFilters:false});Z.setItems([]);U({columnId:"name",sortAsc:true},Z);var Y=new a.Grid("#reporting-tasks-table",Z,X,z);Y.setSelectionModel(new a.RowSelectionModel());Y.registerPlugin(new a.AutoTooltips());Y.setSortColumn("name",true);Y.onSort.subscribe(function(ae,ad){U({columnId:ad.sortCol.id,sortAsc:ad.sortAsc},Z)});Y.onClick.subscribe(function(ah,ae){var ag=A(ah.target);var af=Z.getItem(ae.row);if(Y.getColumns()[ae.cell].id==="actions"){if(ag.hasClass("edit-reporting-task")){B.showConfiguration(af)}else{if(ag.hasClass("start-reporting-task")){B.start(af)}else{if(ag.hasClass("stop-reporting-task")){B.stop(af)}else{if(ag.hasClass("delete-reporting-task")){B.promptToDeleteReportingTask(af)}else{if(ag.hasClass("view-state-reporting-task")){var ad=af.status.runStatus==="STOPPED"&&af.status.activeThreadCount===0;e.showState(af,ad)}else{if(ag.hasClass("change-version-reporting-task")){t.promptForVersionChange(af)}else{if(ag.hasClass("edit-access-policies")){w.showReportingTaskPolicy(af);A("#shell-close-button").click()}}}}}}}}else{if(Y.getColumns()[ae.cell].id==="moreDetails"){if(ag.hasClass("view-reporting-task")){B.showDetails(af)}else{if(ag.hasClass("reporting-task-usage")){A("#shell-close-button").click();K.showPage("../nifi-docs/documentation?"+A.param({select:af.component.type,group:af.component.bundle.group,artifact:af.component.bundle.artifact,version:af.component.bundle.version})).done(function(){E.showSettings()})}}}}});Z.onRowCountChanged.subscribe(function(ae,ad){Y.updateRowCount();Y.render()});Z.onRowsChanged.subscribe(function(ae,ad){Y.invalidateRows(ad.rows);Y.render()});Z.syncGridSelection(Y,true);A("#reporting-tasks-table").data("gridInstance",Y).on("mouseenter","div.slick-cell",function(aj){var ah=A(this).find("div.has-errors");if(ah.length&&!ah.data("qtip")){var ad=A(this).find("span.row-id").text();var af=Z.getItemById(ad);var ag=M.formatUnorderedList(af.component.validationErrors);if(M.isDefinedAndNotNull(ag)){ah.qtip(A.extend({},M.config.tooltipConfig,{content:ag,position:{target:"mouse",viewport:A("#shell-container"),adjust:{x:8,y:8,method:"flipinvert flipinvert"}}}))}}var ae=A(this).find("div.has-bulletins");if(ae.length&&!ae.data("qtip")){var ad=A(this).find("span.row-id").text();var af=Z.getItemById(ad);var ai=M.getFormattedBulletins(af.bulletins);var ag=M.formatUnorderedList(ai);if(M.isDefinedAndNotNull(ag)){ae.qtip(A.extend({},M.config.tooltipConfig,{content:ag,position:{target:"mouse",viewport:A("#shell-container"),adjust:{x:8,y:8,method:"flipinvert flipinvert"}}}))}}})};var u=function(){var ac=function(ah,ae,ag,af,ad){if(!ad.permissions.canRead){return'<span class="blank">'+M.escapeHtml(ad.id)+"</span>"}return M.escapeHtml(ad.component.uri)};var aa=function(ah,ae,ag,af,ad){if(!ad.permissions.canRead){return'<span class="blank">'+M.escapeHtml(ad.id)+"</span>"}return M.escapeHtml(ad.component.description)};var Y=function(ai,ae,ah,ag,ad){var af="";if(M.canModifyController()){af+='<div title="Edit" class="pointer edit-registry fa fa-pencil"></div>';af+='<div title="Remove" class="pointer remove-registry fa fa-trash"></div>'}return af};var ab=[{id:"name",name:"Name",field:"name",formatter:v,sortable:true,resizable:true},{id:"uri",name:"Location",field:"uri",formatter:ac,sortable:true,resizable:true},{id:"description",name:"Description",field:"description",formatter:aa,sortable:true,resizable:true}];ab.push({id:"actions",name:"&nbsp;",resizable:false,formatter:Y,sortable:false,width:90,maxWidth:90});var Z=new a.Data.DataView({inlineFilters:false});Z.setItems([]);U({columnId:"name",sortAsc:true},Z);var X=new a.Grid("#registries-table",Z,ab,z);X.setSelectionModel(new a.RowSelectionModel());X.registerPlugin(new a.AutoTooltips());X.setSortColumn("name",true);X.onSort.subscribe(function(ae,ad){U({columnId:ad.sortCol.id,sortAsc:ad.sortAsc},Z)});X.onClick.subscribe(function(af,ad){var ae=A(af.target);var ag=Z.getItem(ad.row);if(X.getColumns()[ad.cell].id==="actions"){if(ae.hasClass("edit-registry")){D(ag)}else{if(ae.hasClass("remove-registry")){q(ag)}}}else{if(X.getColumns()[ad.cell].id==="moreDetails"){}}});Z.onRowCountChanged.subscribe(function(ae,ad){X.updateRowCount();X.render()});Z.onRowsChanged.subscribe(function(ae,ad){X.invalidateRows(ad.rows);X.render()});Z.syncGridSelection(X,true);A("#registries-table").data("gridInstance",X)};var D=function(X){A("#registry-id").text(X.id);A("#registry-name").val(X.component.name);A("#registry-location").val(X.component.uri);A("#registry-description").val(X.component.description);A("#registry-configuration-dialog").modal("setHeaderText","Edit Registry Client").modal("setButtonModel",[{buttonText:"Update",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){y(X.id)}}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){A(this).modal("hide")}}}]).modal("show")};var q=function(X){k.showYesNoDialog({headerText:"Delete Registry",dialogContent:"Delete registry '"+M.escapeHtml(X.component.name)+"'?",yesHandler:function(){b(X)}})};var b=function(Y){var X=i.getRevision(Y);A.ajax({type:"DELETE",url:Y.uri+"?"+A.param({version:X.version,clientId:X.clientId,disconnectedNodeAcknowledged:s.isDisconnectionAcknowledged()}),dataType:"json"}).done(function(aa){var Z=A("#registries-table").data("gridInstance");var ab=Z.getData();ab.deleteItem(Y.id)}).fail(d.handleAjaxError)};var N=function(){var ad=function(){A("#read-only-maximum-timer-driven-thread-count-field").addClass("unset").text("Unauthorized");A("#read-only-maximum-event-driven-thread-count-field").addClass("unset").text("Unauthorized")};var ab=function(ae){if(ae){A("#general-settings div.editable").show();A("#general-settings div.read-only").hide();A("#settings-save").show()}else{A("#general-settings div.editable").hide();A("#general-settings div.read-only").show();A("#settings-save").hide()}};var aa=A.Deferred(function(ae){A.ajax({type:"GET",url:F.urls.controllerConfig,dataType:"json"}).done(function(af){if(af.permissions.canWrite){A("#maximum-timer-driven-thread-count-field").removeClass("unset").val(af.component.maxTimerDrivenThreadCount);A("#maximum-event-driven-thread-count-field").removeClass("unset").val(af.component.maxEventDrivenThreadCount);ab(true);A("#settings-save").off("click").on("click",function(){m(af.revision.version)})}else{if(af.permissions.canRead){A("#read-only-maximum-timer-driven-thread-count-field").removeClass("unset").text(af.component.maxTimerDrivenThreadCount);A("#read-only-maximum-event-driven-thread-count-field").removeClass("unset").text(af.component.maxEventDrivenThreadCount)}else{ad()}ab(false)}ae.resolve()}).fail(function(ah,af,ag){if(ah.status===403){ad();ab(false);ae.resolve()}else{ae.reject(ah,af,ag)}})}).promise();var X=F.urls.api+"/flow/controller/controller-services";var Z=H.loadControllerServices(X,r());var ac=G();var Y=V();return A.when(aa,Z,ac).done(function(ag,af){var ae=af[0];A("#settings-last-refreshed").text(ae.currentTime)}).fail(d.handleAjaxError)};var G=function(){return A.ajax({type:"GET",url:F.urls.reportingTasks,dataType:"json"}).done(function(X){var ab=[];A.each(X.reportingTasks,function(ad,ac){ab.push(A.extend({type:"ReportingTask",bulletins:[]},ac))});var Z=A("#reporting-tasks-table");M.cleanUpTooltips(Z,"div.has-errors");M.cleanUpTooltips(Z,"div.has-bulletins");var Y=Z.data("gridInstance");var aa=Y.getData();aa.setItems(ab);aa.reSort();Y.invalidate()})};var V=function(){return A.ajax({type:"GET",url:F.urls.registries,dataType:"json"}).done(function(X){var Y=[];A.each(X.registries,function(ab,ac){Y.push(A.extend({type:"Registry"},ac))});var Z=A("#registries-table").data("gridInstance");var aa=Z.getData();aa.setItems(Y);aa.reSort();Z.invalidate()})};var x=function(){K.showContent("#settings").done(function(){J()});A("#settings-tabs").find(".selected-tab").click();E.resetTableSize()};var J=function(){A("#settings-save").mouseout()};var E={init:function(){A("#settings-tabs").tabbs({tabStyle:"tab",selectedTabStyle:"selected-tab",scrollableTabContentStyle:"scrollable",tabs:[{name:"General",tabContentId:"general-settings-tab-content"},{name:"Reporting Task Controller Services",tabContentId:"controller-services-tab-content"},{name:"Reporting Tasks",tabContentId:"reporting-tasks-tab-content"},{name:"Registry Clients",tabContentId:"registries-tab-content"}],select:function(){var X=A(this).text();if(X==="General"){A("#controller-cs-availability").hide();A("#new-service-or-task").hide();A("#settings-save").show()}else{var Y=false;if(M.isDefinedAndNotNull(M.currentUser)){Y=M.currentUser.controllerPermissions.canWrite===true}if(Y){A("#new-service-or-task").show();A("div.controller-settings-table").css("top","32px");A("#new-service-or-task").attr("title",function(){if(X==="Reporting Task Controller Services"){A("#settings-save").hide();return"Create a new reporting task controller service"}else{if(X==="Reporting Tasks"){A("#settings-save").hide();return"Create a new reporting task"}else{if(X==="Registry Clients"){A("#settings-save").hide();return"Register a new registry client"}}}})}else{A("#new-service-or-task").hide();A("div.controller-settings-table").css("top","0")}if(X==="Reporting Task Controller Services"){A("#controller-cs-availability").show()}else{if(X==="Reporting Tasks"||X==="Registry Clients"){A("#controller-cs-availability").hide()}}E.resetTableSize()}}});A("#settings-refresh-button").click(function(){N()});A("#new-service-or-task").on("click",function(){var Z=A("#settings-tabs li.selected-tab").text();if(Z==="Reporting Task Controller Services"){var Y=F.urls.api+"/controller/controller-services";H.promptNewControllerService(Y,r())}else{if(Z==="Reporting Tasks"){A("#new-reporting-task-dialog").modal("show");var aa=A("#reporting-task-types-table").data("gridInstance");if(M.isDefinedAndNotNull(aa)){var X=aa.getData();aa.resizeCanvas();if(X.getLength()>0){R.choseFirstRow(aa)}}A("#reporting-task-type-filter").focus()}else{if(Z==="Registry Clients"){A("#registry-configuration-dialog").modal("setHeaderText","Add Registry Client").modal("setButtonModel",[{buttonText:"Add",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){f()}}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){A(this).modal("hide")}}}]).modal("show");A("#registry-name").focus()}}}});j();H.init(r(),E.showSettings);c();u()},resetTableSize:function(){H.resetTableSize(r());var X=A("#reporting-tasks-table").data("gridInstance");if(M.isDefinedAndNotNull(X)){X.resizeCanvas()}},showSettings:function(){return N().done(x)},loadSettings:function(){return N()},selectControllerService:function(X){var Y=r().data("gridInstance");var Z=Y.getData();var aa=Z.getRowById(X);R.choseRow(Y,aa);Y.scrollRowIntoView(aa);A("#settings-tabs").find("li:eq(1)").click()},selectReportingTask:function(X){var aa=A("#reporting-tasks-table").data("gridInstance");var Y=aa.getData();var Z=Y.getRowById(X);R.choseRow(aa,Z);aa.scrollRowIntoView(Z);A("#settings-tabs").find("li:eq(2)").click()},setBulletins:function(Z,X){if(A("#controller-services-table").data("gridInstance")){H.setBulletins(r(),Z)}var Y=A("#reporting-tasks-table").data("gridInstance");var ab=Y.getData();ab.beginUpdate();if(!M.isEmpty(X)){var ac=O.nest().key(function(ad){return ad.sourceId}).map(X,O.map);ac.each(function(ad,ae){var af=ab.getItemById(ae);if(M.isDefinedAndNotNull(af)){ab.updateItem(ae,A.extend(af,{bulletins:ad}))}})}else{var aa=ab.getItems();A.each(aa,function(ad,ae){ab.updateItem(ae.id,A.extend(ae,{bulletins:[]}))})}ab.endUpdate()}};return E}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","d3","nf.ErrorHandler","nf.Common","nf.Dialog","nf.Storage","nf.Client","nf.ProcessGroup","nf.Shell","nf.CanvasUtils"],function(h,k,j,f,g,i,l,c,d,e){return(nf.ProcessGroupConfiguration=b(h,k,j,f,g,i,l,c,d,e))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ProcessGroupConfiguration=b(require("jquery"),require("d3"),require("nf.ErrorHandler"),require("nf.Common"),require("nf.Dialog"),require("nf.Storage"),require("nf.Client"),require("nf.ProcessGroup"),require("nf.Shell"),require("nf.CanvasUtils")))}else{nf.ProcessGroupConfiguration=b(a.$,a.d3,a.nf.ErrorHandler,a.nf.Common,a.nf.Dialog,a.nf.Storage,a.nf.Client,a.nf.ProcessGroup,a.nf.Shell,a.nf.CanvasUtils)}}}(this,function(d,s,f,h,j,e,t,g,q,n){var c;var l;var r={urls:{api:"../nifi-api",parameterContexts:"../nifi-api/flow/parameter-contexts"}};var k=function(){};var b=function(){return d("#process-group-controller-services-table")};var a=function(u,w){var v={revision:t.getRevision({revision:{version:u}}),disconnectedNodeAcknowledged:e.isDisconnectionAcknowledged(),component:{id:w,name:d("#process-group-name").val(),comments:d("#process-group-comments").val(),parameterContext:{id:d("#process-group-parameter-context-combo").combo("getSelectedOption").value}}};d.ajax({type:"PUT",data:JSON.stringify(v),url:r.urls.api+"/process-groups/"+encodeURIComponent(w),dataType:"json",contentType:"application/json"}).done(function(y){if(y.permissions.canRead&&y.component.parentGroupId===n.getGroupId()){g.set(y)}j.showOkDialog({headerText:"Process Group Configuration",dialogContent:"Process group configuration successfully saved."});d("#process-group-configuration-save").off("click").on("click",function(){a(y.revision.version,w)});var x=r.urls.api+"/flow/process-groups/"+encodeURIComponent(w)+"/controller-services";d.ajax({type:"GET",url:x,dataType:"json"}).done(function(z){var B=b();h.cleanUpTooltips(B,"div.has-errors");var A=B.data("gridInstance");var C=A.getData();d.each(z.controllerServices,function(E,D){C.updateItem(D.id,D)})});n.reload()}).fail(f.handleConfigurationUpdateAjaxError)};var m=function(w){var z=function(){d("#read-only-process-group-name").text("Unauthorized");d("#read-only-process-group-comments").text("Unauthorized")};var y=function(B){if(B){d("#process-group-configuration div.editable").show();d("#process-group-configuration div.read-only").hide();d("#process-group-configuration-save").show()}else{d("#process-group-configuration div.editable").hide();d("#process-group-configuration div.read-only").show();d("#process-group-configuration-save").hide()}};d("#process-group-id").text(w);d("#process-group-configuration-refresh-button").off("click").on("click",function(){m(w)});d("#add-process-group-configuration-controller-service").off("click").on("click",function(){var C=d("#process-group-configuration-tabs li.selected-tab").text();if(C==="Controller Services"){var B=r.urls.api+"/process-groups/"+encodeURIComponent(w)+"/controller-services";c.promptNewControllerService(B,b())}});var x=d.Deferred(function(B){d.ajax({type:"GET",url:r.urls.api+"/process-groups/"+encodeURIComponent(w),dataType:"json"}).done(function(C){d("#process-group-configuration").data("process-group",C);var D=C.component;if(C.permissions.canWrite){d("#process-group-name").removeClass("unset").val(D.name);d("#process-group-comments").removeClass("unset").val(D.comments);d("#process-group-configuration-header-text").text(D.name+" Configuration");y(true);d("#process-group-configuration-save").off("click").on("click",function(){a(C.revision.version,C.id)})}else{if(C.permissions.canRead){d("#read-only-process-group-name").text(D.name);d("#read-only-process-group-comments").text(D.comments);d("#process-group-configuration-header-text").text(D.name+" Configuration")}else{z()}y(false)}B.resolve(C)}).fail(function(F,C,D){if(F.status===403){var E;if(w===n.getGroupId()){E={permissions:{canRead:false,canWrite:n.canWriteCurrentGroup()}}}else{E=g.get(w)}d("#process-group-configuration").data("process-group",E);z();y(false);B.resolve(E)}else{B.reject(F,C,D)}})}).promise();var u=r.urls.api+"/flow/process-groups/"+encodeURIComponent(w)+"/controller-services";var v=c.loadControllerServices(u,b());var A=d.ajax({type:"GET",url:r.urls.parameterContexts,dataType:"json"});return d.when(x,v,A).done(function(F,J,D){var L=J[0];var N=D[0];d("#process-group-configuration-last-refreshed").text(L.currentTime);var E=N.parameterContexts;var O=[{text:"No parameter context",value:null}];var C=E.filter(function(P){return P.permissions.canRead});var K=E.filter(function(P){return !P.permissions.canRead});var M=C.sort(function(Q,P){if(Q.component.name<P.component.name){return -1}if(Q.component.name>P.component.name){return 1}return 0});var I=K.sort(function(Q,P){if(Q.id<P.id){return -1}if(Q.id>P.id){return 1}return 0});var B=M.concat(I);B.forEach(function(Q){var P;if(Q.permissions.canRead){P={text:Q.component.name,value:Q.id,description:Q.component.description}}else{P={disabled:true,text:Q.id,value:Q.id}}O.push(P)});var H={text:"Create new parameter context...",value:undefined,optionClass:"unset"};if(h.canModifyParameterContexts()){O.push(H)}var G={options:O,select:function(P){var Q=this;if(typeof P.value==="undefined"){d("#parameter-context-dialog").modal("setHeaderText","Add Parameter Context").modal("setButtonModel",[{buttonText:"Apply",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},disabled:function(){if(d("#parameter-context-name").val()!==""){return false}return true},handler:{click:function(){l.addParameterContext(function(S){O.pop();var R={text:S.component.name,value:S.component.id,description:S.component.description};O.push(R);if(h.canModifyParameterContexts()){O.push(H)}G.selectedOption={value:S.component.id};Q.combo("destroy").combo(G)})}}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){d(this).modal("hide")}}}]).modal("show");if(d("#parameter-context-dialog").hasClass("read-only")){d("#parameter-context-dialog").removeClass("read-only");d("#parameter-context-dialog").addClass("edit-mode")}if(!d("#parameter-context-id-setting").hasClass("hidden")){d("#parameter-context-id-setting").addClass("hidden")}d("#parameter-context-name").focus()}}};if(h.isDefinedAndNotNull(F.parameterContext)){G.selectedOption={value:F.parameterContext.id}}d("#process-group-parameter-context-combo").combo("destroy").combo(G)}).fail(f.handleAjaxError)};var o=function(){q.showContent("#process-group-configuration").done(function(){p()});d("#process-group-configuration-tabs").find(".selected-tab").click();i.resetTableSize()};var p=function(){d("#process-group-configuration").removeData("process-group");d("#process-group-configuration-save").mouseout();d("#process-group-id").text("");d("#process-group-name").val("");d("#process-group-comments").val("");d("#process-group-configuration-header-text").text("Process Group Configuration")};var i={init:function(v,u){c=v;l=u;d("#process-group-configuration-tabs").tabbs({tabStyle:"tab",selectedTabStyle:"selected-tab",scrollableTabContentStyle:"scrollable",tabs:[{name:"General",tabContentId:"general-process-group-configuration-tab-content"},{name:"Controller Services",tabContentId:"process-group-controller-services-tab-content"}],select:function(){var x=d("#process-group-configuration").data("process-group");var y=h.isDefinedAndNotNull(x)?x.permissions.canWrite:false;var w=d(this).text();if(w==="General"){d("#flow-cs-availability").hide();d("#add-process-group-configuration-controller-service").hide();if(y){d("#process-group-configuration-save").show()}else{d("#process-group-configuration-save").hide()}}else{d("#flow-cs-availability").show();d("#process-group-configuration-save").hide();if(y){d("#add-process-group-configuration-controller-service").show();d("#process-group-controller-services-tab-content").css("top","32px")}else{d("#add-process-group-configuration-controller-service").hide();d("#process-group-controller-services-tab-content").css("top","0")}i.resetTableSize()}}});k();c.init(b())},resetTableSize:function(){c.resetTableSize(b())},showConfiguration:function(u){return m(u).done(o)},loadConfiguration:function(u){return m(u)},selectControllerService:function(u){var v=b().data("gridInstance");var w=v.getData();var x=w.getRowById(u);v.setSelectedRows([x]);v.scrollRowIntoView(x);d("#process-group-configuration-tabs").find("li:eq(1)").click()}};return i}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Common","nf.ErrorHandler"],function(c,d,e){return(nf.ConnectionDetails=b(c,d,e))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ConnectionDetails=b(require("jquery"),require("nf.Common"),require("nf.ErrorHandler")))}else{nf.ConnectionDetails=b(a.$,a.nf.Common,a.nf.ErrorHandler)}}}(this,function(d,b,g){var j=function(o,q,p){if(p.type==="PROCESSOR"){return k(o,q,p)}else{if(p.type==="FUNNEL"){return l(o,q,p)}else{if(p.type==="REMOTE_OUTPUT_PORT"){return f(o,q,p)}else{return n(o,q,p)}}}};var k=function(o,q,p){return d.Deferred(function(r){d.ajax({type:"GET",url:"../nifi-api/processors/"+encodeURIComponent(p.id),dataType:"json"}).done(function(s){var t=s.component;var u=d('<div class="label"></div>').text(t.name).addClass("ellipsis").attr("title",t.name);var v=d("<div></div>").text(b.substringAfterLast(t.type,".")).addClass("ellipsis").attr("title",b.substringAfterLast(t.type,"."));d("#read-only-connection-source-label").text("From processor");d("#read-only-connection-source").append(u).append(v);d("#read-only-connection-source-group-name").text(q);r.resolve()}).fail(function(w,s,t){if(w.status===403){var u=d('<div class="label"></div>').text(p.name).addClass("ellipsis").attr("title",p.name);var v=d("<div></div>").text("Processor").addClass("ellipsis").attr("title","Processor");d("#read-only-connection-source-label").text("From processor");d("#read-only-connection-source").append(u).append(v);d("#read-only-connection-source-group-name").text(q);r.resolve()}else{r.reject(w,s,t)}})}).promise()};var l=function(o,q,p){return d.Deferred(function(r){d("#read-only-connection-source-label").text("From funnel");d("#read-only-connection-source").text("funnel").attr("title","funnel");d("#read-only-connection-source-group-name").text(q);r.resolve()}).promise()};var f=function(o,q,p){return d.Deferred(function(r){d.ajax({type:"GET",url:"../nifi-api/remote-process-groups/"+encodeURIComponent(p.groupId),dataType:"json"}).done(function(s){var t=s.component;d("#read-only-connection-source-label").text("From output");d("#read-only-connection-source").text(p.name).attr("title",p.name);d("#read-only-connection-source-group-name").text(t.name);d("#read-only-connection-source-group div.setting-name").text("Within Remote Group");d("#read-only-connection-remote-source-url").text(t.targetUri).show();r.resolve()}).fail(function(u,s,t){if(u.status===403){d("#read-only-connection-source-label").text("From output");d("#read-only-connection-source").text(p.name).attr("title",p.name);d("#read-only-connection-source-group-name").text(p.groupId);d("#read-only-connection-source-group div.setting-name").text("Within Remote Group");r.resolve()}else{r.reject(u,s,t)}})}).promise()};var n=function(o,q,p){return d.Deferred(function(r){if(o===p.groupId){d("#read-only-connection-source-label").text("From input");d("#read-only-connection-source").text(p.name).attr("title",p.name);d("#read-only-connection-source-group-name").text(q);r.resolve()}else{d.ajax({type:"GET",url:"../nifi-api/process-groups/"+encodeURIComponent(p.groupId),dataType:"json"}).done(function(s){var t=s.component;d("#read-only-connection-source-label").text("From output");d("#read-only-connection-source").text(p.name).attr("title",p.name);d("#read-only-connection-source-group-name").text(t.name);r.resolve()}).fail(function(u,s,t){if(u.status===403){d("#read-only-connection-source-label").text("From output");d("#read-only-connection-source").text(p.name).attr("title",p.name);d("#read-only-connection-source-group-name").text(p.groupId);r.resolve()}else{r.reject(u,s,t)}})}}).promise()};var e=function(p,q,o){if(o.type==="PROCESSOR"){return a(p,q,o)}else{if(o.type==="FUNNEL"){return m(p,q,o)}else{if(o.type==="REMOTE_INPUT_PORT"){return i(p,q,o)}else{return c(p,q,o)}}}};var a=function(p,q,o){return d.Deferred(function(r){d.ajax({type:"GET",url:"../nifi-api/processors/"+encodeURIComponent(o.id),dataType:"json"}).done(function(s){var t=s.component;var u=d('<div class="label"></div>').text(t.name).addClass("ellipsis").attr("title",t.name);var v=d("<div></div>").text(b.substringAfterLast(t.type,".")).addClass("ellipsis").attr("title",b.substringAfterLast(t.type,"."));d("#read-only-connection-target-label").text("To processor");d("#read-only-connection-target").append(u).append(v);d("#read-only-connection-target-group-name").text(q);r.resolve()}).fail(function(w,s,t){if(w.status===403){var u=d('<div class="label"></div>').text(o.name).addClass("ellipsis").attr("title",o.name);var v=d("<div></div>").text("Processor").addClass("ellipsis").attr("title","Processor");d("#read-only-connection-target-label").text("To processor");d("#read-only-connection-target").append(u).append(v);d("#read-only-connection-target-group-name").text(q);r.resolve()}else{r.reject(w,s,t)}})}).promise()};var m=function(p,q,o){return d.Deferred(function(r){d("#read-only-connection-target-label").text("To funnel");d("#read-only-connection-target").text("funnel").attr("title","funnel");d("#read-only-connection-target-group-name").text(q);r.resolve()}).promise()};var i=function(p,q,o){return d.Deferred(function(r){d.ajax({type:"GET",url:"../nifi-api/remote-process-groups/"+encodeURIComponent(o.groupId),dataType:"json"}).done(function(s){var t=s.component;d("#read-only-connection-target-label").text("To input");d("#read-only-connection-target").text(o.name).attr("title",o.name);d("#read-only-connection-target-group-name").text(t.name);d("#read-only-connection-target-group div.setting-name").text("Within Remote Group");d("#read-only-connection-remote-target-url").text(t.targetUri).show();r.resolve()}).fail(function(u,s,t){if(u.status===403){d("#read-only-connection-target-label").text("To input");d("#read-only-connection-target").text(o.name).attr("title",o.name);d("#read-only-connection-target-group-name").text(o.groupId);d("#read-only-connection-target-group div.setting-name").text("Within Remote Group");r.resolve()}else{r.reject(u,s,t)}})}).promise()};var c=function(p,q,o){return d.Deferred(function(r){if(p===o.groupId){d("#read-only-connection-target-label").text("To output");d("#read-only-connection-target").text(o.name).attr("title",o.name);d("#read-only-connection-target-group-name").text(q);r.resolve()}else{d.ajax({type:"GET",url:"../nifi-api/process-groups/"+encodeURIComponent(o.groupId),dataType:"json"}).done(function(s){var t=s.component;d("#read-only-connection-target-label").text("To input");d("#read-only-connection-target").text(o.name).attr("title",o.name);d("#read-only-connection-target-group-name").text(t.name);r.resolve()}).fail(function(u,s,t){if(u.status===403){d("#read-only-connection-target-label").text("To input");d("#read-only-connection-target").text(o.name).attr("title",o.name);d("#read-only-connection-target-group-name").text(o.groupId);r.resolve()}else{r.reject(u,s,t)}})}}).promise()};var h=function(o){d('<div class="available-relationship-container"></div>').append(d('<div class="relationship-name"></div>').text(o)).appendTo("#read-only-relationship-names")};return{init:function(){d("#connection-details-tabs").tabbs({tabStyle:"tab",selectedTabStyle:"selected-tab",scrollableTabContentStyle:"scrollable",tabs:[{name:"Details",tabContentId:"read-only-connection-details-tab-content"},{name:"Settings",tabContentId:"read-only-connection-settings-tab-content"}]});d("#connection-details").modal({headerText:"Connection Details",scrollableContentStyle:"scrollable",buttons:[{buttonText:"Ok",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){d("#connection-details").modal("hide")}}}],handler:{close:function(){d("#read-only-relationship-names").empty();b.clearField("read-only-connection-name");b.clearField("read-only-connection-id");d("#read-only-connection-source-label").text("");d("#read-only-connection-source").empty();d("#read-only-connection-source-group div.setting-name").text("Within Group");d("#read-only-connection-source-group-name").text("");d("#read-only-connection-remote-source-url").text("").hide();d("#read-only-connection-target-label").text("");d("#read-only-connection-target").empty();d("#read-only-connection-target-group div.setting-name").text("Within Group");d("#read-only-connection-target-group-name").text("");d("#read-only-connection-remote-target-url").text("").hide();d("#read-only-relationship-names").css("border-width","0").empty();b.clearField("read-only-flow-file-expiration");b.clearField("read-only-back-pressure-object-threshold");b.clearField("read-only-back-pressure-data-size-threshold");b.clearField("read-only-load-balance-strategy");b.clearField("read-only-load-balance-partition-attribute");b.clearField("read-only-load-balance-compression");d("#read-only-prioritizers").empty()},open:function(){b.toggleScrollable(d("#"+this.find(".tab-container").attr("id")+"-content").get(0))}}})},showDetails:function(p,r){var q=d.ajax({type:"GET",url:"../nifi-api/flow/process-groups/"+encodeURIComponent(p),dataType:"json"});var o=d.ajax({type:"GET",url:"../nifi-api/connections/"+encodeURIComponent(r),dataType:"json"});d.when(q,o).done(function(w,u){var v=w[0];var x=u[0];if(x.permissions.canRead){var t=x.component;var z=v.permissions.canRead?v.processGroupFlow.breadcrumb.breadcrumb.name:v.processGroupFlow.id;var y=j(v.id,z,t.source);var s=e(v.id,z,t.destination);d.when(y,s).done(function(){var B=t.availableRelationships;var A=t.selectedRelationships;if(b.isDefinedAndNotNull(B)||b.isDefinedAndNotNull(A)){d.each(B,function(G,F){h(F)});d.each(A,function(H,F){if(d.inArray(F,B)===-1){var I=h(F);d(I).children("div.relationship-name").addClass("undefined")}var G=d("#read-only-relationship-names").children("div");d.each(G.children("div.relationship-name"),function(K,J){var L=d(J);if(L.text()===F){L.css("font-weight","bold")}})});d("#selected-relationship-text").show();d("#read-only-relationship-names-container").show()}else{d("#selected-relationship-text").hide();d("#read-only-relationship-names-container").hide()}b.populateField("read-only-connection-name",t.name);b.populateField("read-only-connection-id",t.id);b.populateField("read-only-flow-file-expiration",t.flowFileExpiration);b.populateField("read-only-back-pressure-object-threshold",t.backPressureObjectThreshold);b.populateField("read-only-back-pressure-data-size-threshold",t.backPressureDataSizeThreshold);b.populateField("read-only-load-balance-strategy",b.getComboOptionText(b.loadBalanceStrategyOptions,t.loadBalanceStrategy));b.populateField("read-only-load-balance-partition-attribute",t.loadBalancePartitionAttribute);b.populateField("read-only-load-balance-compression",b.getComboOptionText(b.loadBalanceCompressionOptions,t.loadBalanceCompression));if(t.loadBalanceStrategy==="PARTITION_BY_ATTRIBUTE"){d("#read-only-load-balance-partition-attribute-setting").show()}else{d("#read-only-load-balance-partition-attribute-setting").hide()}if(t.loadBalanceStrategy==="DO_NOT_LOAD_BALANCE"){d("#read-only-load-balance-compression-setting").hide()}else{d("#read-only-load-balance-compression-setting").show()}if(b.isDefinedAndNotNull(t.prioritizers)&&t.prioritizers.length>0){var E=d("<ol></ol>").css("list-style","decimal inside none");d.each(t.prioritizers,function(F,G){E.append(d("<li></li>").text(b.substringAfterLast(G,".")))});d("#read-only-prioritizers").append(E)}else{var C=d('<span class="unset">No value set</span>');d("#read-only-prioritizers").append(C)}d("#connection-details-tabs").find("li:first").click();d("#connection-details").modal("show");var D=d("#read-only-relationship-names");if(D.is(":visible")&&D.get(0).scrollHeight>Math.round(D.innerHeight())){D.css("border-width","1px")}}).fail(g.handleAjaxError)}}).fail(g.handleAjaxError)}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","d3","nf.Common","nf.Dialog","nf.ErrorHandler"],function(e,c,f,d,g){return(nf.StatusHistory=b(e,c,f,d,g))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.StatusHistory=b(require("jquery"),require("d3"),require("nf.Common"),require("nf.Dialog"),require("nf.ErrorHandler")))}else{nf.StatusHistory=b(a.$,a.d3,a.nf.Common,a.nf.Dialog,a.nf.ErrorHandler)}}}(this,function(e,x,h,s,g){var w={nifiInstanceId:"nifi-instance-id",nifiInstanceLabel:"NiFi",type:{processor:"Processor",inputPort:"Input Port",outputPort:"Output Port",processGroup:"Process Group",remoteProcessGroup:"Remote Process Group",connection:"Connection",funnel:"Funnel",template:"Template",label:"Label"},urls:{api:"../nifi-api"}};var v={DURATION:function(z){return h.formatDuration(z)},COUNT:function(z){if(z%1===0){return h.formatInteger(z)}else{return h.formatFloat(z)}},DATA_SIZE:function(z){return h.formatDataSize(z)}};var n=null;var c=null;var q=null;var d=null;var k=function(B,F,D,A,E){e("#status-history-last-refreshed").text(D.generated);var z={groupId:B,id:F,type:A,instances:[]};var C=D.fieldDescriptors;z.details=D.componentDetails;z.selectedDescriptor=h.isUndefined(E)?C[0]:E;if(h.isDefinedAndNotNull(D.aggregateSnapshots)&&D.aggregateSnapshots.length>1){z.instances.push({id:w.nifiInstanceId,label:w.nifiInstanceLabel,snapshots:D.aggregateSnapshots})}else{j();return}e.each(D.nodeSnapshots,function(H,G){if(h.isDefinedAndNotNull(G.statusSnapshots)&&G.statusSnapshots.length>1){z.instances.push({id:G.nodeId,label:G.address+":"+G.apiPort,snapshots:G.statusSnapshots})}});if(z.instances.length>0){e("#status-history-dialog").data("status-history",z);r(z,C)}else{j()}};var j=function(){s.showOkDialog({headerText:"Status History",dialogContent:"Insufficient history, please try again later."})};var r=function(z,A){if(d===null){d={}}e.each(z.instances,function(C,B){B.snapshots.forEach(function(F){var E=new Date();var D=E.getTimezoneOffset()*60*1000;F.timestamp=new Date(F.timestamp+D+n)})});m(A,z.selectedDescriptor)};var m=function(B,A){var z=[];e.each(B,function(C,D){z.push({text:D.label,value:D.field,description:h.escapeHtml(D.description)})});e("#status-history-metric-combo").combo({selectedOption:{value:A.field},options:z,select:function(D){var E=null;e.each(B,function(F,G){if(D.value===G.field){E=G;return false}});if(E!==null){if(q===null||q.field!==E.field){c=null}q=E;var C=e("#status-history-dialog").data("status-history");C.selectedDescriptor=E;e("#status-history-dialog").data("status-history",C);l()}}});e("#status-history-dialog").modal("show")};var a=function(){return e("#status-history-chart-container").parent().outerHeight()-e("#status-history-chart-control-container").outerHeight()-parseInt(e("#status-history-chart-control-container").css("margin-top"),10)};var y=function(){return e("body").height()-e("#status-history-chart-control-container").outerHeight()-e("#status-history-refresh-container").outerHeight()-parseInt(e("#status-history-chart-control-container").css("margin-top"),10)-parseInt(e(".dialog-content").css("top"))-parseInt(e(".dialog-content").css("bottom"))};var u=function(){return e("body").width()-e("#status-history-details").innerWidth()-parseInt(e("#status-history-dialog").css("left"),10)-parseInt(e(".dialog-content").css("left"))-parseInt(e(".dialog-content").css("right"))};var l=function(){var ah=e("#status-history-dialog");if(ah.is(":visible")){var aa=ah.data("status-history");var ag=aa.selectedDescriptor;e("#status-history-details").empty();var C=o("Status History");x.map(aa.details).each(function(aw,av){i(C,av,aw)});var E={top:15,right:20,bottom:25,left:75};var X=x.scaleOrdinal(x.schemeCategory10);var B=[];e.each(aa.instances,function(aw,av){B.push(av.label)});X.domain(B);var ar=[];e.each(aa.instances,function(aw,av){if(h.isUndefinedOrNull(d[av.id])){d[av.id]=true}ar.push({id:av.id,label:av.label,values:e.map(av.snapshots,function(ax){return{timestamp:ax.timestamp,value:ax.statusMetrics[ag.field]}}),visible:d[av.id]===true})});var O=function(av){if(av.getMilliseconds()){return x.timeFormat(":%S.%L")(av)}else{if(av.getSeconds()){return x.timeFormat(":%S")(av)}else{if(av.getMinutes()||av.getHours()){return x.timeFormat("%H:%M")(av)}else{if(av.getDay()&&av.getDate()!==1){return x.timeFormat("%a %d")(av)}else{if(av.getDate()!==1){return x.timeFormat("%b %d")(av)}else{if(av.getMonth()){return x.timeFormat("%B")(av)}else{return x.timeFormat("%Y")(av)}}}}}}};var N=e("#status-history-chart-container").empty();if(N.hasClass("ui-resizable")){N.resizable("destroy");N.removeAttr("style")}N.height(a());var z=N.outerWidth()-E.left-E.right;var A=N.outerHeight()-E.top-E.bottom;V=e("#status-history-container").width();if(z>V){z=V}am=y();if(A>am){A=am}var ae=x.scaleTime().range([0,z]);var U=x.axisBottom(ae).ticks(5).tickFormat(O);var ad=x.scaleLinear().range([A,0]);var F=x.axisLeft(ad).tickFormat(v[ag.formatter]);var G=x.line().curve(x.curveMonotoneX).x(function(av){return ae(av.timestamp)}).y(function(av){return ad(av.value)});var M=x.select("#status-history-chart-container").append("svg").attr("style","pointer-events: none;").attr("width",N.parent().width()).attr("height",N.innerHeight());var H=M.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",z).attr("height",A);var au=M.append("g").attr("transform","translate("+E.left+", "+E.top+")");var D=x.min(ar,function(av){return x.min(av.values,function(aw){return aw.timestamp})});var K=x.max(ar,function(av){return x.max(av.values,function(aw){return aw.timestamp})});i(C,"Start",h.formatDateTime(D));i(C,"End",h.formatDateTime(K));ae.domain([D,K]);ad.domain([p(ar),t(ar)]);au.append("g").attr("class","x axis").attr("transform","translate(0, "+A+")").call(U);au.append("g").attr("class","y axis").call(F).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").attr("text-anchor","end").text(ag.label);var ab=au.selectAll(".status").data(ar).enter().append("g").attr("clip-path","url(#clip)").attr("class","status");ab.append("path").attr("class",function(av){return"chart-line chart-line-"+av.id}).attr("d",function(av){return G(av.values)}).attr("stroke",function(av){return X(av.label)}).classed("hidden",function(av){return av.visible===false}).append("title").text(function(av){return av.label});ab.each(function(av){var aw=x.select(this).append("g").attr("class",function(){return"mark-group mark-group-"+av.id}).classed("hidden",function(ax){return ax.visible===false});aw.selectAll("circle.mark").data(av.values).enter().append("circle").attr("style","pointer-events: all;").attr("class","mark").attr("cx",function(ax){return ae(ax.timestamp)}).attr("cy",function(ax){return ad(ax.value)}).attr("fill",function(){return X(av.label)}).attr("r",1.5).append("title").text(function(ax){return av.label+" -- "+v[ag.formatter](ax.value)})});M.attr("width",N.parent().width()).attr("height",N.innerHeight());H.attr("width",z).attr("height",A);au.select(".x.axis").attr("transform","translate(0, "+A+")");var T=e("#status-history-chart-control-container").empty();var R=T.innerHeight()-E.top-E.bottom;var ak=x.scaleTime().range([0,z]);var J=x.axisBottom(ak).ticks(5).tickFormat(O);var ao=x.scaleLinear().range([R,0]);var ai=x.axisLeft(ao).tickValues(ad.domain()).tickFormat(v[ag.formatter]);var Q=x.line().curve(x.curveMonotoneX).x(function(av){return ak(av.timestamp)}).y(function(av){return ao(av.value)});var af=x.select("#status-history-chart-control-container").append("svg").attr("width",N.parent().width()).attr("height",R+E.top+E.bottom);var W=af.append("g").attr("transform","translate("+E.left+", "+E.top+")");ak.domain(ae.domain());ao.domain(ad.domain());W.append("g").attr("class","x axis").attr("transform","translate(0, "+R+")").call(J);W.append("g").attr("class","y axis").call(ai);var at=W.selectAll(".status").data(ar).enter().append("g").attr("class","status");at.append("path").attr("class",function(av){return"chart-line chart-line-"+av.id}).attr("d",function(av){return Q(av.values)}).attr("stroke",function(av){return X(av.label)}).classed("hidden",function(av){return d[av.id]===false}).append("title").text(function(av){return av.label});var L=function(){var aA=e.map(ar,function(aG){var aE=ae.domain();var aF=ad.domain();var aH=e.extend({},aG);return e.extend(aH,{values:e.grep(aG.values,function(aI){return aI.timestamp.getTime()>=aE[0].getTime()&&aI.timestamp.getTime()<=aE[1].getTime()&&aI.value>=aF[0]&&aI.value<=aF[1]})})});var av=e.grep(aA,function(aE){return aE.id!==w.nifiInstanceId&&aE.visible&&aE.values.length>0});var az=av.length===0?"NA":v[ag.formatter](p(av));var ay=av.length===0?"NA":v[ag.formatter](f(av));var aw=av.length===0?"NA":v[ag.formatter](t(av));e("#node-aggregate-statistics").text(az+" / "+aw+" / "+ay);var aC=e.grep(aA,function(aE){return aE.id===w.nifiInstanceId&&aE.visible&&aE.values.length>0});var aD=aC.length===0?"NA":v[ag.formatter](p(aC));var aB=aC.length===0?"NA":v[ag.formatter](f(aC));var ax=aC.length===0?"NA":v[ag.formatter](t(aC));e("#cluster-aggregate-statistics").text(aD+" / "+ax+" / "+aB)};var aq=function(av,aw){ae.domain(av);ad.domain(aw);ab.selectAll(".chart-line").attr("d",function(ax){return G(ax.values)});ab.selectAll("circle.mark").attr("cx",function(ax){return ae(ax.timestamp)}).attr("cy",function(ax){return ad(ax.value)}).attr("r",function(){return x.brushSelection(P.node())===null?1.5:4});au.select(".x.axis").call(U);au.select(".y.axis").call(F)};var I=function(){c=x.brushSelection(P.node());var aw,av;if(c===null){var ax=e.grep(ar,function(ay){return ay.visible});if(ax.length===0){av=ao.domain()}else{av=[x.min(ax,function(ay){return x.min(ay.values,function(az){return az.value})}),x.max(ax,function(ay){return x.max(ay.values,function(az){return az.value})})]}aw=ak.domain()}else{aw=[c[0][0],c[1][0]].map(ak.invert,ak);av=[c[1][1],c[0][1]].map(ao.invert,ao)}aq(aw,av);L()};var al=x.brush().extent([[ak.range()[0],ao.range()[1]],[ak.range()[1],ao.range()[0]]]).on("brush",I);var P=W.append("g").attr("class","brush").on("click",I).call(al);if(h.isDefinedAndNotNull(c)){al=al.move(P,c)}W.select("rect.selection").attr("style","pointer-events: all;").on("dblclick",function(){if(c!==null){var av=ao.range();al.move(P,[[c[0][0],av[1]],[c[1][0],av[0]]])}});var ac=e.grep(ar,function(av){return av.id!==w.nifiInstanceId}).sort(function(aw,av){return aw.label<av.label?-1:aw.label>av.label?1:0});var ap=function(aw,av){var ay=e("<div></div>").addClass("legend-label nf-checkbox-label").css("color",X(av.label)).text(av.label).ellipsis();var ax=e('<div class="nf-checkbox"></div>').on("click",function(){var az=x.selectAll("path.chart-line-"+av.id);var aB=x.select("g.mark-group-"+av.id);var aA=aB.classed("hidden");az.classed("hidden",function(){return !aA});aB.classed("hidden",function(){return !aA});av.visible=aA;d[av.id]=av.visible;I()}).addClass(av.visible?"checkbox-checked":"checkbox-unchecked");e('<div class="legend-entry"></div>').append(ax).append(ay).on("mouseenter",function(){x.selectAll("path.chart-line-"+av.id).classed("over",true)}).on("mouseleave",function(){x.selectAll("path.chart-line-"+av.id).classed("over",false)}).appendTo(aw)};var Z=e.grep(ar,function(av){return av.id===w.nifiInstanceId});var aj=o("NiFi");i(aj,"Min / Max / Mean","","cluster-aggregate-statistics");ap(aj,Z[0]);if(ac.length>0){var Y=o("Nodes");i(Y,"Min / Max / Mean","","node-aggregate-statistics");e.each(ac,function(aw,av){ap(Y,av)})}I();var V,am,S,an;N.append('<div class="ui-resizable-handle ui-resizable-se"></div>').resizable({minWidth:425,minHeight:150,handles:{se:".ui-resizable-se"},resize:function(ax,aw){an=e("#status-history-dialog");var av={};if(h.isDefinedAndNotNull(an.data("nf-dialog"))){av=an.data("nf-dialog")}av["min-width"]=(an.width()/e(window).width())*100+"%";av["min-height"]=(an.height()/e(window).height())*100+"%";av.responsive["fullscreen-width"]=an.outerWidth()+"px";av.responsive["fullscreen-height"]=an.outerHeight()+"px";V=u();if(aw.helper.width()>V){aw.helper.width(V);av.responsive["fullscreen-width"]=e(window).width()+"px";av["min-width"]="100%"}am=y();if(aw.helper.height()>am){aw.helper.height(am);av.responsive["fullscreen-height"]=e(window).height()+"px";av["min-height"]="100%"}S=a();if(aw.helper.height()<S){aw.helper.height(S)}av["min-width"]=(parseInt(av["min-width"],10)>=100)?"100%":av["min-width"];av["min-height"]=(parseInt(av["min-height"],10)>=100)?"100%":av["min-height"];an.data("nfDialog",av);an.css("min-width",(N.outerWidth()+e("#status-history-details").outerWidth()+40));an.css("min-height",(N.outerHeight()+e("#status-history-refresh-container").outerHeight()+e("#status-history-chart-control-container").outerHeight()+e(".dialog-buttons").outerHeight()+e(".dialog-header").outerHeight()+40+5));an.center()},stop:l})}};var p=function(z){return x.min(z,function(A){return x.min(A.values,function(B){return B.value})})};var t=function(z){return x.max(z,function(A){return x.max(A.values,function(B){return B.value})})};var f=function(A){var B=0;var z=x.sum(A,function(C){B+=C.values.length;return x.sum(C.values,function(D){return D.value})});return z/B};var o=function(A){var z=e('<div class="status-history-detail"></div>').appendTo("#status-history-details");e('<div class="detail-container-label"></div>').text(A).appendTo(z);return e("<div></div>").appendTo(z)};var i=function(A,C,D,E){var B=e('<div class="detail-item"></div>').appendTo(A);e('<div class="setting-name"></div>').text(C).appendTo(B);var z=e('<div class="setting-field"></div>').text(D).appendTo(B);if(h.isDefinedAndNotNull(E)){z.attr("id",E)}};var b={init:function(z){n=z;e("#status-history-refresh-button").click(function(){var A=e("#status-history-dialog").data("status-history");if(A!==null){if(A.type===w.type.processor){b.showProcessorChart(A.groupId,A.id,A.selectedDescriptor)}else{if(A.type===w.type.processGroup){b.showProcessGroupChart(A.groupId,A.id,A.selectedDescriptor)}else{if(A.type===w.type.remoteProcessGroup){b.showRemoteProcessGroupChart(A.groupId,A.id,A.selectedDescriptor)}else{b.showConnectionChart(A.groupId,A.id,A.selectedDescriptor)}}}}});e("#status-history-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Status History",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){this.modal("hide")}}}],handler:{close:function(){e("#status-history-dialog").removeData("status-history");e("#status-history-chart-container").empty();e("#status-history-chart-control-container").empty();e("#status-history-details").empty();c=null;q=null;d=null},open:l}});e(window).on("resize",function(A){if(A.target===window){l()}h.toggleScrollable(e("#status-history-details").get(0))})},showConnectionChart:function(z,A,B){e.ajax({type:"GET",url:w.urls.api+"/flow/connections/"+encodeURIComponent(A)+"/status/history",dataType:"json"}).done(function(C){k(z,A,C.statusHistory,w.type.connection,B)}).fail(g.handleAjaxError)},showProcessorChart:function(z,B,A){e.ajax({type:"GET",url:w.urls.api+"/flow/processors/"+encodeURIComponent(B)+"/status/history",dataType:"json"}).done(function(C){k(z,B,C.statusHistory,w.type.processor,A)}).fail(g.handleAjaxError)},showProcessGroupChart:function(A,z,B){e.ajax({type:"GET",url:w.urls.api+"/flow/process-groups/"+encodeURIComponent(z)+"/status/history",dataType:"json"}).done(function(C){k(A,z,C.statusHistory,w.type.processGroup,B)}).fail(g.handleAjaxError)},showRemoteProcessGroupChart:function(A,z,B){e.ajax({type:"GET",url:w.urls.api+"/flow/remote-process-groups/"+encodeURIComponent(z)+"/status/history",dataType:"json"}).done(function(C){k(A,z,C.statusHistory,w.type.remoteProcessGroup,B)}).fail(g.handleAjaxError)}};return b}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["angular"],function(c){return(nf.ng.Bridge=b(c))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ng.Bridge=b(require("angular")))}else{nf.ng.Bridge=b(a.angular)}}}(this,function(a){function b(){this.rootScope;this.injector}b.prototype={constructor:b,call:function(e,d){var h=e.split(".");var i=this.rootScope;a.forEach(h,function(j){i=i[j]});var f=d.split(".");d=this.rootScope;a.forEach(f,function(j){d=d[j]});var g=Array.prototype.slice.call(arguments,2);var c=d.apply(i,g);if(c){return c}},get:function(c){var d=c.split(".");var e=this.rootScope;a.forEach(d,function(f){e=e[f]});return e},digest:function(){this.rootScope.$digest()}};return new b()}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","Slick","nf.Common","nf.ErrorHandler","nf.StatusHistory","nf.ProcessorDetails","nf.ConnectionDetails","nf.ng.Bridge","lodash-core"],function(e,c,d,h,i,g,k,f,j){return(nf.SummaryTable=b(e,c,d,h,i,g,k,f,j))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.SummaryTable=b(require("jquery"),require("Slick"),require("nf.Common"),require("nf.ErrorHandler"),require("nf.StatusHistory"),require("nf.ProcessorDetails"),require("nf.ConnectionDetails"),require("nf.ng.Bridge"),require("lodash-core")))}else{nf.SummaryTable=b(a.$,a.Slick,a.nf.Common,a.nf.ErrorHandler,a.nf.StatusHistory,a.nf.ProcessorDetails,a.nf.ConnectionDetails,a.nf.ng.Bridge,a._)}}}(this,function(e,x,i,h,c,q,p,F,D){var B={urls:{api:"../nifi-api",status:"../nifi-api/flow/process-groups/root/status",systemDiagnostics:"../nifi-api/system-diagnostics",flowConfig:"../nifi-api/flow/config"}};var y="&nbsp;&nbsp;|&nbsp;&nbsp;";var E=function(H,G){if(top!==window){if(i.isDefinedAndNotNull(parent.nf)&&i.isDefinedAndNotNull(parent.nf.CanvasUtils)&&i.isDefinedAndNotNull(parent.nf.Shell)){parent.nf.CanvasUtils.showComponent(H,G);parent.$("#shell-close-button").click()}}};var n=function(U,R,O,L,H){var Q=D.get(H,"predictions.predictedMillisUntilBytesBackpressure",-1);var N=D.get(H,"predictions.predictedMillisUntilCountBackpressure",-1);var I=D.get(H,"percentUseCount",0);var M=D.get(H,"percentUseBytes",0);var T=[{label:"object",timeToBackPressure:N},{label:"size",timeToBackPressure:Q},];var S=[{label:"object",percent:I},{label:"size",percent:M}];var P=D.maxBy(S,"percent");if(P.percent>=100){return"now ("+P.label+")"}var G=T.filter(function(V){return V.timeToBackPressure>=0});if(D.isEmpty(G)){return"NA"}var J=D.minBy(G,"timeToBackPressure");var K=i.formatPredictedDuration(J.timeToBackPressure);return i.escapeHtml(K)+" ("+J.label+")"};var r={id:"backpressurePrediction",field:"backpressurePrediction",name:"Estimated Time to Back Pressure",sortable:true,defaultSortAsc:false,formatter:n,resize:true,toolTip:"Estimated Time to Back Pressure"};var u=function(au){e("#summary-filter").keyup(function(){C()});e("#summary-tabs").tabbs({tabStyle:"tab",selectedTabStyle:"selected-tab",scrollableTabContentStyle:"scrollable",tabs:[{name:"Processors",tabContentId:"processor-summary-tab-content"},{name:"Input Ports",tabContentId:"input-port-summary-tab-content"},{name:"Output Ports",tabContentId:"output-port-summary-tab-content"},{name:"Remote Process Groups",tabContentId:"remote-process-group-summary-tab-content"},{name:"Connections",tabContentId:"connection-summary-tab-content"},{name:"Process Groups",tabContentId:"process-group-summary-tab-content"}],select:function(){var bd=e(this).text();if(bd==="Processors"){var bc=e("#processor-summary-table").data("gridInstance");if(i.isDefinedAndNotNull(bc)){bc.resizeCanvas();e("#displayed-items").text(i.formatInteger(bc.getData().getLength()));e("#total-items").text(i.formatInteger(bc.getData().getLength()))}e("#summary-filter-type").combo({options:[{text:"by name",value:"name"},{text:"by type",value:"type"}],select:function(bi){C()}})}else{if(bd==="Connections"){var bb=e("#connection-summary-table").data("gridInstance");if(i.isDefinedAndNotNull(bb)){bb.resizeCanvas();e("#displayed-items").text(i.formatInteger(bb.getData().getLength()));e("#total-items").text(i.formatInteger(bb.getData().getLength()))}e("#summary-filter-type").combo({options:[{text:"by source",value:"sourceName"},{text:"by name",value:"name"},{text:"by destination",value:"destinationName"}],select:function(bi){C()}})}else{if(bd==="Input Ports"){var bh=e("#input-port-summary-table").data("gridInstance");if(i.isDefinedAndNotNull(bh)){bh.resizeCanvas();e("#displayed-items").text(i.formatInteger(bh.getData().getLength()));e("#total-items").text(i.formatInteger(bh.getData().getLength()))}e("#summary-filter-type").combo({options:[{text:"by name",value:"name"}],select:function(bi){C()}})}else{if(bd==="Output Ports"){var bg=e("#output-port-summary-table").data("gridInstance");if(i.isDefinedAndNotNull(bg)){bg.resizeCanvas();e("#displayed-items").text(i.formatInteger(bg.getData().getLength()));e("#total-items").text(i.formatInteger(bg.getData().getLength()))}e("#summary-filter-type").combo({options:[{text:"by name",value:"name"}],select:function(bi){C()}})}else{if(bd==="Remote Process Groups"){var bf=e("#remote-process-group-summary-table").data("gridInstance");if(i.isDefinedAndNotNull(bf)){bf.resizeCanvas();e("#displayed-items").text(i.formatInteger(bf.getData().getLength()));e("#total-items").text(i.formatInteger(bf.getData().getLength()))}e("#summary-filter-type").combo({options:[{text:"by name",value:"name"},{text:"by uri",value:"targetUri"}],select:function(bi){C()}})}else{var be=e("#process-group-summary-table").data("gridInstance");if(i.isDefinedAndNotNull(be)){be.resizeCanvas();e("#displayed-items").text(i.formatInteger(be.getData().getLength()));e("#total-items").text(i.formatInteger(be.getData().getLength()))}e("#summary-filter-type").combo({options:[{text:"by name",value:"name"}],select:function(bi){C()}})}}}}}e("#summary-filter").val("");C()}});var aH=function(bg,bc,bf,be,bb){var bd='<div title="View Processor Details" class="pointer show-processor-details fa fa-info-circle"></div>';if(!i.isEmpty(bb.bulletins)){bd+='<div class="has-bulletins fa fa-sticky-note-o"></div><span class="hidden row-id">'+i.escapeHtml(bb.id)+"</span>"}return bd};var aA=function(bg,bc,bf,be,bb){var bd="";if(au&&bb.executionNode==="PRIMARY"){bd+='<div class="is-primary-icon" title="This component is only scheduled to execute on the Primary Node">P</div>'}bd+=i.escapeHtml(bf);return bd};var aF=function(bf,bc,be,bd,bb){return i.escapeHtml(bb.read)+y+i.escapeHtml(bb.written)};var ad=function(bf,bc,be,bd,bb){return i.formatInteger(bb.tasks)+y+i.escapeHtml(bb.tasksDuration)};var G=function(bf,bc,be,bd,bb){return i.formatValue(be)};var ba=function(bj,bh,bg,bd,bb){var be="";var bf="";if(bb.terminatedThreadCount>0){be="("+bb.activeThreadCount+y+bb.terminatedThreadCount+")";bf="Threads: (Active / Terminated)"}else{if(bb.activeThreadCount>0){be="("+bb.activeThreadCount+")";bf="Active Threads"}}var bc;switch(bg.toLowerCase()){case"running":bc="fa fa-play running";break;case"stopped":bc="fa fa-stop stopped";break;case"enabled":bc="fa fa-flash enabled";break;case"disabled":bc="icon icon-enable-false disabled";break;case"validating":bc="fa fa-spin fa-circle-notch validating";break;case"invalid":bc="fa fa-warning invalid";break;default:bc=""}var bi='<div layout="row"><div class="'+bc+'"></div><div class="status-text">'+i.escapeHtml(bg)+'</div><div style="float: left; margin-left: 4px;" title="'+bf+'">'+i.escapeHtml(be)+"</div></div>";return bi};var a4={id:"name",field:"name",name:"Name",formatter:aA,sortable:true,resizable:true};var aV={id:"runStatus",field:"runStatus",name:"Run Status",formatter:ba,sortable:true};var ax={id:"input",field:"input",name:'<span class="input-title">In</span>&nbsp;(<span class="input-size-title">Size</span>)&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / data size in the last 5 min",sortable:true,defaultSortAsc:false,resizable:true,formatter:i.genericValueFormatter};var aE={id:"io",field:"io",name:'<span class="read-title">Read</span>'+y+'<span class="written-title">Write</span>&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Data size in the last 5 min",formatter:aF,sortable:true,defaultSortAsc:false,resizable:true};var a6={id:"output",field:"output",name:'<span class="output-title">Out</span>&nbsp;(<span class="output-size-title">Size</span>)&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / data size in the last 5 min",sortable:true,defaultSortAsc:false,resizable:true,formatter:i.genericValueFormatter};var aC={id:"tasks",field:"tasks",name:'<span class="tasks-title">Tasks</span>'+y+'<span class="time-title">Time</span>&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / duration in the last 5 min",formatter:ad,sortable:true,defaultSortAsc:false,resizable:true};var aG=[{id:"moreDetails",field:"moreDetails",name:"&nbsp;",resizable:false,formatter:aH,sortable:true,width:50,maxWidth:50,toolTip:"Sorts based on presence of bulletins"},a4,{id:"type",field:"type",name:"Type",sortable:true,resizable:true,formatter:i.genericValueFormatter},{id:"parentGroup",field:"parentProcessGroupName",name:"Process Group",sortable:true,resizable:true,formatter:i.genericValueFormatter,toolTip:"Parent Process Group name"},aV,ax,aE,a6,aC];var aY=(top!==window);if(au||aY||i.SUPPORTS_SVG){var a2=function(bg,bc,bf,be,bb){var bd="";if(aY){bd+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Processor in '+i.escapeHtml(bb.processGroupNamePath)+'"></div>'}if(i.SUPPORTS_SVG){bd+='<div class="pointer show-processor-status-history fa fa-area-chart" title="View Status History"></div>'}if(au){bd+='<div class="pointer show-cluster-processor-summary fa fa-cubes" title="View Processor Details"></div>'}return bd};aG.push({id:"actions",name:"&nbsp;",formatter:a2,resizable:false,sortable:false,width:75,maxWidth:75})}var ay={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var aI=new x.Data.DataView({inlineFilters:false});aI.setItems([]);aI.setFilterArgs({searchString:"",property:"name"});aI.setFilter(l);A("processor-summary-table",{columnId:"name",sortAsc:true},aI);var a7=new x.Grid("#processor-summary-table",aI,aG,ay);a7.setSelectionModel(new x.RowSelectionModel());a7.registerPlugin(new x.AutoTooltips());a7.setSortColumn("name",true);a7.onSort.subscribe(function(bc,bb){A("processor-summary-table",{columnId:bb.sortCol.field,sortAsc:bb.sortAsc},aI)});a7.onClick.subscribe(function(be,bb){var bd=e(be.target);var bc=aI.getItem(bb.row);if(a7.getColumns()[bb.cell].id==="actions"){if(bd.hasClass("go-to")){E(bc.groupId,bc.id)}else{if(bd.hasClass("show-processor-status-history")){c.showProcessorChart(bc.groupId,bc.id)}else{if(bd.hasClass("show-cluster-processor-summary")){m(bc.groupId,bc.id);e("#summary-loading-container").hide();e("#cluster-processor-summary-dialog").modal("show");O.resizeCanvas()}}}}else{if(a7.getColumns()[bb.cell].id==="moreDetails"){if(bd.hasClass("show-processor-details")){q.showDetails(bc.groupId,bc.id)}}}});aI.onRowCountChanged.subscribe(function(bc,bb){a7.updateRowCount();a7.render();if(e("#processor-summary-table").is(":visible")){e("#displayed-items").text(i.formatInteger(bb.current))}});aI.onRowsChanged.subscribe(function(bc,bb){a7.invalidateRows(bb.rows);a7.render()});e("#processor-summary-table").data("gridInstance",a7).on("mouseenter","div.slick-cell",function(bf){var bc=e(this).find("div.has-bulletins");if(bc.length&&!bc.data("qtip")){var bg=e(this).find("span.row-id").text();var bb=aI.getItemById(bg);var be=i.getFormattedBulletins(bb.bulletins);var bd=i.formatUnorderedList(be);if(i.isDefinedAndNotNull(bd)){bc.qtip(e.extend({},i.config.tooltipConfig,{content:bd,position:{container:e("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});e("#cluster-processor-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Processor Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){e("#cluster-processor-id").text("");e("#cluster-processor-name").text("");this.modal("hide")}}}],handler:{close:function(){e("#summary-loading-container").show()}}});e("#cluster-processor-refresh-button").click(function(){m(e("#cluster-processor-group-id").text(),e("#cluster-processor-id").text())});var N=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:i.genericValueFormatter},aV,ax,aE,a6,aC];var a1={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var aR=new x.Data.DataView({inlineFilters:false});aR.setItems([]);A("cluster-processor-summary-table",{columnId:"node",sortAsc:true},aR);var O=new x.Grid("#cluster-processor-summary-table",aR,N,a1);O.setSelectionModel(new x.RowSelectionModel());O.registerPlugin(new x.AutoTooltips());O.setSortColumn("node",true);O.onSort.subscribe(function(bc,bb){A("cluster-processor-summary-table",{columnId:bb.sortCol.field,sortAsc:bb.sortAsc},aR)});aR.onRowCountChanged.subscribe(function(bc,bb){O.updateRowCount();O.render()});aR.onRowsChanged.subscribe(function(bc,bb){O.invalidateRows(bb.rows);O.render()});e("#cluster-processor-summary-table").data("gridInstance",O);var aO=function(bf,bc,be,bd,bb){return'<div class="pointer show-connection-details fa fa-info-circle" title="View Connection Details"></div>'};var a5=function(bb){return D.isNumber(bb)&&bb>=0?D.clamp(bb,0,100)+"%":"NA"};var V=function(bh,bd,bg,be,bc){var bb="NA";if(i.isDefinedAndNotNull(bc.percentUseCount)){bb=a5(bc.percentUseCount)}var bf="NA";if(i.isDefinedAndNotNull(bc.percentUseBytes)){bf=a5(bc.percentUseBytes)}return i.escapeHtml(bb)+y+i.escapeHtml(bf)};var aX={id:"queued",field:"queued",name:'<span class="queued-title">Queue</span>&nbsp;(<span class="queued-size-title">Size</span>)',sortable:true,defaultSortAsc:false,resize:true,formatter:i.genericValueFormatter};var U={id:"backpressure",field:"backpressure",name:'Threshold %: <span class="backpressure-object-title">Queue</span>&nbsp;&nbsp;|&nbsp;&nbsp;<span class="backpressure-data-size-title">Size</span>',sortable:true,defaultSortAsc:false,formatter:V,resize:true};var av=[{id:"moreDetails",name:"&nbsp;",sortable:false,resizable:false,formatter:aO,width:50,maxWidth:50},{id:"name",field:"name",name:"Name",sortable:true,resizable:true,formatter:G},aX,U,r,ax,{id:"sourceName",field:"sourceName",name:"From Source",sortable:true,resizable:true,formatter:i.genericValueFormatter},a6,{id:"destinationName",field:"destinationName",name:"To Destination",sortable:true,resizable:true,formatter:i.genericValueFormatter}];if(au||aY||i.SUPPORTS_SVG){var J=function(bg,bc,bf,be,bb){var bd="";if(aY){bd+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Connection"></div>'}if(i.SUPPORTS_SVG){bd+='<div class="pointer show-connection-status-history fa fa-area-chart" title="View Status History"></div>'}if(au){bd+='<div class="pointer show-cluster-connection-summary fa fa-cubes" title="View Connection Details"></div>'}return bd};av.push({id:"actions",name:"&nbsp;",formatter:J,resizable:false,sortable:false,width:75,maxWidth:75})}var ab={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var am=new x.Data.DataView({inlineFilters:false});am.setItems([]);am.setFilterArgs({searchString:"",property:"sourceName"});am.setFilter(l);A("connection-summary-table",{columnId:"sourceName",sortAsc:true},am);var aL=new x.Grid("#connection-summary-table",am,av,ab);aL.setSelectionModel(new x.RowSelectionModel());aL.registerPlugin(new x.AutoTooltips());aL.setSortColumn("sourceName",true);aL.onSort.subscribe(function(bc,bb){A("connection-summary-table",{columnId:bb.sortCol.field,sortAsc:bb.sortAsc},am)});aL.onClick.subscribe(function(be,bb){var bd=e(be.target);var bc=am.getItem(bb.row);if(aL.getColumns()[bb.cell].id==="actions"){if(bd.hasClass("go-to")){E(bc.groupId,bc.id)}else{if(bd.hasClass("show-connection-status-history")){c.showConnectionChart(bc.groupId,bc.id)}else{if(bd.hasClass("show-cluster-connection-summary")){b(bc.groupId,bc.id);e("#summary-loading-container").hide();e("#cluster-connection-summary-dialog").modal("show");ai.resizeCanvas()}}}}else{if(aL.getColumns()[bb.cell].id==="moreDetails"){if(bd.hasClass("show-connection-details")){p.showDetails(bc.groupId,bc.id)}}}});am.onRowCountChanged.subscribe(function(bc,bb){aL.updateRowCount();aL.render();if(e("#connection-summary-table").is(":visible")){e("#displayed-items").text(i.formatInteger(bb.current))}});am.onRowsChanged.subscribe(function(bc,bb){aL.invalidateRows(bb.rows);aL.render()});e("#connection-summary-table").data("gridInstance",aL);e("#cluster-connection-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Connection Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){e("#cluster-connection-id").text("");e("#cluster-connection-name").text("");this.modal("hide")}}}],handler:{close:function(){e("#summary-loading-container").show()}}});e("#cluster-connection-refresh-button").click(function(){b(e("#cluster-connection-group-id").text(),e("#cluster-connection-id").text())});var Q=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:i.genericValueFormatter},aX,U,r,ax,a6];var K={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var I=new x.Data.DataView({inlineFilters:false});I.setItems([]);A("cluster-connection-summary-table",{columnId:"node",sortAsc:true},I);var ai=new x.Grid("#cluster-connection-summary-table",I,Q,K);ai.setSelectionModel(new x.RowSelectionModel());ai.registerPlugin(new x.AutoTooltips());ai.setSortColumn("node",true);ai.onSort.subscribe(function(bc,bb){A("cluster-connection-summary-table",{columnId:bb.sortCol.field,sortAsc:bb.sortAsc},I)});I.onRowCountChanged.subscribe(function(bc,bb){ai.updateRowCount();ai.render()});I.onRowsChanged.subscribe(function(bc,bb){ai.invalidateRows(bb.rows);ai.render()});e("#cluster-connection-summary-table").data("gridInstance",ai);var T=function(bg,bc,bf,be,bb){var bd="";if(!i.isEmpty(bb.bulletins)){bd+='<div class="has-bulletins fa fa-sticky-note-o" style="margin-left: 5px; float: left;"></div><span class="hidden row-id">'+i.escapeHtml(bb.id)+"</span>"}return bd};var aM={id:"moreDetails",field:"moreDetails",name:"&nbsp;",resizable:false,formatter:T,sortable:true,width:50,maxWidth:50,toolTip:"Sorts based on presence of bulletins"};var af={id:"transferred",field:"transferred",name:'<span class="transferred-title">Transferred</span>&nbsp;(<span class="transferred-size-title">Size</span>)&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / data size transferred to and from connections in the last 5 min",resizable:true,defaultSortAsc:false,sortable:true,formatter:i.genericValueFormatter};var ac={id:"sent",field:"sent",name:'<span class="sent-title">Sent</span>&nbsp;(<span class="sent-size-title">Size</span>)&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / data size in the last 5 min",sortable:true,defaultSortAsc:false,resizable:true,formatter:i.genericValueFormatter};var aJ={id:"received",field:"received",name:'<span class="received-title">Received</span>&nbsp;(<span class="received-size-title">Size</span>)&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / data size in the last 5 min",sortable:true,defaultSortAsc:false,resizable:true,formatter:i.genericValueFormatter};var aW=function(bh,bc,bg,bd,bb){var bf,be;switch(bg){case"UP_TO_DATE":bf="fa fa-check up-to-date";be="Up to date";break;case"LOCALLY_MODIFIED":bf="fa fa-asterisk locally-modified";be="Locally modified";break;case"STALE":bf="fa fa-arrow-circle-up stale";be="Stale";break;case"LOCALLY_MODIFIED_AND_STALE":bf="fa fa-exclamation-circle locally-modified-and-stale";be="Locally modified and stale";break;case"SYNC_FAILURE":bf="fa fa-question sync-failure";be="Sync failure";break;default:bf="";be=""}return'<div layout="row"><div class="'+bf+'"></div><div class="status-text">'+be+"</div></div>"};var R=[aM,{id:"name",field:"name",name:"Name",sortable:true,resizable:true,formatter:G},{id:"versionedFlowState",field:"versionedFlowState",name:"Version State",sortable:true,resizable:true,formatter:aW},af,ax,aE,a6,ac,aJ];if(au||aY||i.SUPPORTS_SVG){var a3=function(bg,bc,bf,be,bb){var bd="";if(aY&&bb.groupId!==null){bd+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Process Group"></div>'}if(i.SUPPORTS_SVG){bd+='<div class="pointer show-process-group-status-history fa fa-area-chart" title="View Status History"></div>'}if(au){bd+='<div class="pointer show-cluster-process-group-summary fa fa-cubes" title="View Process Group Details"></div>'}return bd};R.push({id:"actions",name:"&nbsp;",formatter:a3,resizable:false,sortable:false,width:75,maxWidth:75})}var ah={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var aw=new x.Data.DataView({inlineFilters:false});aw.setItems([]);aw.setFilterArgs({searchString:"",property:"name"});aw.setFilter(l);A("process-group-summary-table",{columnId:"name",sortAsc:true},aw);var aT=new x.Grid("#process-group-summary-table",aw,R,ah);aT.setSelectionModel(new x.RowSelectionModel());aT.registerPlugin(new x.AutoTooltips());aT.setSortColumn("name",true);aT.onSort.subscribe(function(bc,bb){A("process-group-summary-table",{columnId:bb.sortCol.field,sortAsc:bb.sortAsc},aw)});aT.onClick.subscribe(function(be,bb){var bd=e(be.target);var bc=aw.getItem(bb.row);if(aT.getColumns()[bb.cell].id==="actions"){if(bd.hasClass("go-to")){if(i.isDefinedAndNotNull(parent.nf)&&i.isDefinedAndNotNull(parent.nf.ProcessGroup)&&i.isDefinedAndNotNull(parent.nf.Shell)){parent.nf.ProcessGroup.enterGroup(bc.id);parent.$("#shell-close-button").click()}}else{if(bd.hasClass("show-process-group-status-history")){c.showProcessGroupChart(bc.groupId,bc.id)}else{if(bd.hasClass("show-cluster-process-group-summary")){o(bc.id);e("#summary-loading-container").hide();e("#cluster-process-group-summary-dialog").modal("show");Z.resizeCanvas()}}}}});aw.onRowCountChanged.subscribe(function(bc,bb){aT.updateRowCount();aT.render();if(e("#process-group-summary-table").is(":visible")){e("#displayed-items").text(i.formatInteger(bb.current))}});aw.onRowsChanged.subscribe(function(bc,bb){aT.invalidateRows(bb.rows);aT.render()});e("#process-group-summary-table").data("gridInstance",aT).on("mouseenter","div.slick-cell",function(bg){var bd=e(this).find("div.has-bulletins");if(bd.length&&!bd.data("qtip")){var bb=e(this).find("span.row-id").text();var bc=aw.getItemById(bb);var bf=i.getFormattedBulletins(bc.bulletins);var be=i.formatUnorderedList(bf);if(i.isDefinedAndNotNull(be)){bd.qtip(e.extend({},i.config.tooltipConfig,{content:be,position:{container:e("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});e("#cluster-process-group-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Process Group Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){e("#cluster-process-group-id").text("");e("#cluster-process-group-name").text("");this.modal("hide")}}}],handler:{close:function(){e("#summary-loading-container").show()}}});e("#cluster-process-group-refresh-button").click(function(){o(e("#cluster-process-group-id").text())});var an=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:i.genericValueFormatter},af,ax,aE,a6,ac,aJ];var aD={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var a0=new x.Data.DataView({inlineFilters:false});a0.setItems([]);A("cluster-processor-summary-table",{columnId:"node",sortAsc:true},a0);var Z=new x.Grid("#cluster-process-group-summary-table",a0,an,aD);Z.setSelectionModel(new x.RowSelectionModel());Z.registerPlugin(new x.AutoTooltips());Z.setSortColumn("node",true);Z.onSort.subscribe(function(bc,bb){A("cluster-process-group-summary-table",{columnId:bb.sortCol.field,sortAsc:bb.sortAsc},a0)});a0.onRowCountChanged.subscribe(function(bc,bb){Z.updateRowCount();Z.render()});a0.onRowsChanged.subscribe(function(bc,bb){Z.invalidateRows(bb.rows);Z.render()});e("#cluster-process-group-summary-table").data("gridInstance",Z);var a9=[aM,a4,aV,a6];if(au||aY){var aq=function(bg,bc,bf,be,bb){var bd="";if(aY){bd+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Input Port"></div>'}if(au){bd+='<div class="pointer show-cluster-input-port-summary fa fa-cubes" title="View Input Port Details"></div>'}return bd};a9.push({id:"actions",name:"&nbsp;",formatter:aq,resizable:false,sortable:false,width:75,maxWidth:75})}var al={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var L=new x.Data.DataView({inlineFilters:false});L.setItems([]);L.setFilterArgs({searchString:"",property:"name"});L.setFilter(l);A("input-port-summary-table",{columnId:"name",sortAsc:true},L);var ak=new x.Grid("#input-port-summary-table",L,a9,al);ak.setSelectionModel(new x.RowSelectionModel());ak.registerPlugin(new x.AutoTooltips());ak.setSortColumn("name",true);ak.onSort.subscribe(function(bc,bb){A("input-port-summary-table",{columnId:bb.sortCol.field,sortAsc:bb.sortAsc},L)});ak.onClick.subscribe(function(be,bb){var bd=e(be.target);var bc=L.getItem(bb.row);if(ak.getColumns()[bb.cell].id==="actions"){if(bd.hasClass("go-to")){E(bc.groupId,bc.id)}else{if(bd.hasClass("show-cluster-input-port-summary")){v(bc.groupId,bc.id);e("#summary-loading-container").hide();e("#cluster-input-port-summary-dialog").modal("show");az.resizeCanvas()}}}});L.onRowCountChanged.subscribe(function(bc,bb){ak.updateRowCount();ak.render();if(e("#input-port-summary-table").is(":visible")){e("#display-items").text(i.formatInteger(bb.current))}});L.onRowsChanged.subscribe(function(bc,bb){ak.invalidateRows(bb.rows);ak.render()});e("#input-port-summary-table").data("gridInstance",ak).on("mouseenter","div.slick-cell",function(bg){var bd=e(this).find("div.has-bulletins");if(bd.length&&!bd.data("qtip")){var bb=e(this).find("span.row-id").text();var bc=L.getItemById(bb);var bf=i.getFormattedBulletins(bc.bulletins);var be=i.formatUnorderedList(bf);if(i.isDefinedAndNotNull(be)){bd.qtip(e.extend({},i.config.tooltipConfig,{content:be,position:{container:e("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});e("#cluster-input-port-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Input Port Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){e("#cluster-input-port-id").text("");e("#cluster-input-port-name").text("");this.modal("hide")}}}],handler:{close:function(){e("#summary-loading-container").show()}}});e("#cluster-input-port-refresh-button").click(function(){v(e("#cluster-input-port-group-id").text(),e("#cluster-input-port-id").text())});var ag=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:i.genericValueFormatter},aV,a6];var aS={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var X=new x.Data.DataView({inlineFilters:false});X.setItems([]);A("cluster-input-port-summary-table",{columnId:"node",sortAsc:true},X);var az=new x.Grid("#cluster-input-port-summary-table",X,ag,aS);az.setSelectionModel(new x.RowSelectionModel());az.registerPlugin(new x.AutoTooltips());az.setSortColumn("node",true);az.onSort.subscribe(function(bc,bb){A("cluster-input-port-summary-table",{columnId:bb.sortCol.field,sortAsc:bb.sortAsc},X)});X.onRowCountChanged.subscribe(function(bc,bb){az.updateRowCount();az.render()});X.onRowsChanged.subscribe(function(bc,bb){az.invalidateRows(bb.rows);az.render()});e("#cluster-input-port-summary-table").data("gridInstance",az);var aB=[aM,a4,aV,ax];if(au||aY){var aN=function(bg,bc,bf,be,bb){var bd="";if(aY){bd+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Output Port"></div>'}if(au){bd+='<div class="pointer show-cluster-output-port-summary fa fa-cubes" title="View Output Port Details"></div>'}return bd};aB.push({id:"actions",name:"&nbsp;",formatter:aN,resizable:false,sortable:false,width:75,maxWidth:75})}var ar={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var H=new x.Data.DataView({inlineFilters:false});H.setItems([]);H.setFilterArgs({searchString:"",property:"name"});H.setFilter(l);A("output-port-summary-table",{columnId:"name",sortAsc:true},H);var aj=new x.Grid("#output-port-summary-table",H,aB,ar);aj.setSelectionModel(new x.RowSelectionModel());aj.registerPlugin(new x.AutoTooltips());aj.setSortColumn("name",true);aj.onSort.subscribe(function(bc,bb){A("output-port-summary-table",{columnId:bb.sortCol.field,sortAsc:bb.sortAsc},H)});aj.onClick.subscribe(function(be,bb){var bd=e(be.target);var bc=H.getItem(bb.row);if(aj.getColumns()[bb.cell].id==="actions"){if(bd.hasClass("go-to")){E(bc.groupId,bc.id)}else{if(bd.hasClass("show-cluster-output-port-summary")){k(bc.groupId,bc.id);e("#summary-loading-container").hide();e("#cluster-output-port-summary-dialog").modal("show");a8.resizeCanvas()}}}});H.onRowCountChanged.subscribe(function(bc,bb){aj.updateRowCount();aj.render();if(e("#output-port-summary-table").is(":visible")){e("#display-items").text(i.formatInteger(bb.current))}});H.onRowsChanged.subscribe(function(bc,bb){aj.invalidateRows(bb.rows);aj.render()});e("#output-port-summary-table").data("gridInstance",aj).on("mouseenter","div.slick-cell",function(bg){var bd=e(this).find("div.has-bulletins");if(bd.length&&!bd.data("qtip")){var bb=e(this).find("span.row-id").text();var bc=H.getItemById(bb);var bf=i.getFormattedBulletins(bc.bulletins);var be=i.formatUnorderedList(bf);if(i.isDefinedAndNotNull(be)){bd.qtip(e.extend({},i.config.tooltipConfig,{content:be,position:{container:e("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});e("#cluster-output-port-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Output Port Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){e("#cluster-output-port-id").text("");e("#cluster-output-port-name").text("");this.modal("hide")}}}],handler:{close:function(){e("#summary-loading-container").show()}}});e("#cluster-output-port-refresh-button").click(function(){k(e("#cluster-output-port-group-id").text(),e("#cluster-output-port-id").text())});var W=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:i.genericValueFormatter},aV,ax];var ao={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var aK=new x.Data.DataView({inlineFilters:false});aK.setItems([]);A("cluster-output-port-summary-table",{columnId:"node",sortAsc:true},aK);var a8=new x.Grid("#cluster-output-port-summary-table",aK,W,ao);a8.setSelectionModel(new x.RowSelectionModel());a8.registerPlugin(new x.AutoTooltips());a8.setSortColumn("node",true);a8.onSort.subscribe(function(bc,bb){A("cluster-output-port-summary-table",{columnId:bb.sortCol.field,sortAsc:bb.sortAsc},aK)});aK.onRowCountChanged.subscribe(function(bc,bb){a8.updateRowCount();a8.render()});aK.onRowsChanged.subscribe(function(bc,bb){a8.invalidateRows(bb.rows);a8.render()});e("#cluster-output-port-summary-table").data("gridInstance",a8);var aa=function(bj,bh,bg,be,bb){var bf="";if(i.isDefinedAndNotNull(bb.activeThreadCount)&&bb.activeThreadCount>0){bf="("+i.escapeHtml(bb.activeThreadCount)+")"}var bi="invalid fa fa-warning";var bc="Invalid";if(bg==="Transmitting"){bi="transmitting fa fa-bullseye";bc=bg}else{bi="not-transmitting icon icon-transmit-false";bc="Not Transmitting"}var bd='<div layout="row"><div class="'+bi+'"></div>';return bd+'<div class="status-text">'+bc+'</div><div style="float: left; margin-left: 4px;">'+i.escapeHtml(bf)+"</div></div>"};var ae={id:"transmissionStatus",field:"transmissionStatus",name:"Transmitting",formatter:aa,sortable:true,resizable:true};var aU={id:"targetUri",field:"targetUri",name:"Target URI",sortable:true,resizable:true,formatter:i.genericValueFormatter};var ap=[{id:"moreDetails",field:"moreDetails",name:"&nbsp;",resizable:false,formatter:T,sortable:true,width:50,maxWidth:50,toolTip:"Sorts based on presence of bulletins"},a4,aU,ae,ac,aJ];if(au||aY||i.SUPPORTS_SVG){var S=function(bg,bc,bf,be,bb){var bd="";if(aY){bd+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Process Group"></div>'}if(i.SUPPORTS_SVG){bd+='<div class="pointer show-remote-process-group-status-history fa fa-area-chart" title="View Status History"></div>'}if(au){bd+='<div class="pointer show-cluster-remote-process-group-summary fa fa-cubes" title="View Remote Process Group Details"></div>'}return bd};ap.push({id:"actions",name:"&nbsp;",formatter:S,resizable:false,sortable:false,width:75,maxWidth:75})}var aQ={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var aZ=new x.Data.DataView({inlineFilters:false});aZ.setItems([]);aZ.setFilterArgs({searchString:"",property:"name"});aZ.setFilter(l);A("remote-process-group-summary-table",{columnId:"name",sortAsc:true},aZ);var Y=new x.Grid("#remote-process-group-summary-table",aZ,ap,aQ);Y.setSelectionModel(new x.RowSelectionModel());Y.registerPlugin(new x.AutoTooltips());Y.setSortColumn("name",true);Y.onSort.subscribe(function(bc,bb){A("remote-process-group-summary-table",{columnId:bb.sortCol.field,sortAsc:bb.sortAsc},aZ)});Y.onClick.subscribe(function(be,bb){var bd=e(be.target);var bc=aZ.getItem(bb.row);if(Y.getColumns()[bb.cell].id==="actions"){if(bd.hasClass("go-to")){E(bc.groupId,bc.id)}else{if(bd.hasClass("show-remote-process-group-status-history")){c.showRemoteProcessGroupChart(bc.groupId,bc.id)}else{if(bd.hasClass("show-cluster-remote-process-group-summary")){f(bc.groupId,bc.id);e("#summary-loading-container").hide();e("#cluster-remote-process-group-summary-dialog").modal("show");at.resizeCanvas()}}}}});aZ.onRowCountChanged.subscribe(function(bc,bb){Y.updateRowCount();Y.render();if(e("#remote-process-group-summary-table").is(":visible")){e("#displayed-items").text(i.formatInteger(bb.current))}});aZ.onRowsChanged.subscribe(function(bc,bb){Y.invalidateRows(bb.rows);Y.render()});e("#remote-process-group-summary-table").data("gridInstance",Y).on("mouseenter","div.slick-cell",function(bg){var bd=e(this).find("div.has-bulletins");if(bd.length&&!bd.data("qtip")){var bb=e(this).find("span.row-id").text();var bc=aZ.getItemById(bb);var bf=i.getFormattedBulletins(bc.bulletins);var be=i.formatUnorderedList(bf);if(i.isDefinedAndNotNull(be)){bd.qtip(e.extend({},i.config.tooltipConfig,{content:be,position:{container:e("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});e("#cluster-remote-process-group-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Remote Process Group Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){e("#cluster-remote-process-group-id").text("");e("#cluster-remote-process-group-name").text("");this.modal("hide")}}}],handler:{close:function(){e("#summary-loading-container").show()}}});e("#cluster-remote-process-group-refresh-button").click(function(){f(e("#cluster-remote-process-group-group-id").text(),e("#cluster-remote-process-group-id").text())});var aP=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:i.genericValueFormatter},aU,ae,ac,aJ];var M={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:false,enableColumnReorder:false,autoEdit:false,rowHeight:24};var P=new x.Data.DataView({inlineFilters:false});P.setItems([]);A("cluster-remote-process-group-summary-table",{columnId:"node",sortAsc:true},P);var at=new x.Grid("#cluster-remote-process-group-summary-table",P,aP,M);at.setSelectionModel(new x.RowSelectionModel());at.registerPlugin(new x.AutoTooltips());at.setSortColumn("node",true);at.onSort.subscribe(function(bc,bb){A("cluster-remote-process-group-summary-table",{columnId:bb.sortCol.field,sortAsc:bb.sortAsc},P)});P.onRowCountChanged.subscribe(function(bc,bb){at.updateRowCount();at.render()});P.onRowsChanged.subscribe(function(bc,bb){at.invalidateRows(bb.rows);at.render()});e("#cluster-remote-process-group-summary-table").data("gridInstance",at);e("#system-diagnostics-link").click(function(){t().done(function(){e("#summary-loading-container").hide();e("#system-diagnostics-dialog").modal("show")})});e("#system-diagnostics-tabs").tabbs({tabStyle:"tab",selectedTabStyle:"selected-tab",scrollableTabContentStyle:"scrollable",tabs:[{name:"JVM",tabContentId:"jvm-tab-content"},{name:"System",tabContentId:"system-tab-content"},{name:"Version",tabContentId:"version-tab-content"}]});e("#system-diagnostics-dialog").modal({scrollableContentStyle:"scrollable",headerText:"System Diagnostics",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){this.modal("hide")}}}],handler:{close:function(){e("#summary-loading-container").show()},open:function(){i.toggleScrollable(e("#"+this.find(".tab-container").attr("id")+"-content").get(0))}}});e("#system-diagnostics-refresh-button").click(function(){t()});e("#total-items").text("0")};var a={};var A=function(I,G,J){if(i.isUndefined(a[I])){a[I]={}}var H=function(al,ak){if(G.columnId==="moreDetails"){var ag=0;if(!i.isEmpty(al.bulletins)){ag=al.bulletins.length}var N=0;if(!i.isEmpty(ak.bulletins)){N=ak.bulletins.length}return ag-N}else{if(G.columnId==="runStatus"||G.columnId==="transmissionStatus"){var aa=i.isDefinedAndNotNull(al[G.columnId])?al[G.columnId]:"";var X=i.isDefinedAndNotNull(ak[G.columnId])?ak[G.columnId]:"";if(aa===X){return al.activeThreadCount-ak.activeThreadCount}else{return aa===X?0:aa>X?1:-1}}else{if(G.columnId==="queued"){var an=a[I].count%4;if(an<2){e("#"+I+" span.queued-title").addClass("sorted");var ao=i.parseCount(al.queuedCount);var L=i.parseCount(ak.queuedCount);return ao-L}else{e("#"+I+" span.queued-size-title").addClass("sorted");var K=i.parseSize(al.queuedSize);var T=i.parseSize(ak.queuedSize);return K-T}}else{if(G.columnId==="backpressure"){var an=a[I].count%4;if(an<2){e("#"+I+" span.backpressure-object-title").addClass("sorted");var S=i.isDefinedAndNotNull(al.percentUseCount)?al.percentUseCount:-1;var U=i.isDefinedAndNotNull(ak.percentUseCount)?ak.percentUseCount:-1;return S-U}else{e("#"+I+" span.backpressure-data-size-title").addClass("sorted");var af=i.isDefinedAndNotNull(al.percentUseBytes)?al.percentUseBytes:-1;var am=i.isDefinedAndNotNull(ak.percentUseBytes)?ak.percentUseBytes:-1;return af-am}}else{if(G.columnId==="backpressurePrediction"){var Q=Math.max(D.get(al,"percentUseBytes",0),D.get(al,"percentUseCount",0));var Z=Math.max(D.get(ak,"percentUseBytes",0),D.get(ak,"percentUseCount",0));var O=Math.min(D.get(al,"predictions.predictedMillisUntilBytesBackpressure",Number.MAX_VALUE),D.get(al,"predictions.predictedMillisUntilCountBackpressure",Number.MAX_VALUE));var ae=Math.min(D.get(ak,"predictions.predictedMillisUntilBytesBackpressure",Number.MAX_VALUE),D.get(ak,"predictions.predictedMillisUntilCountBackpressure",Number.MAX_VALUE));if(Q>=100){O=0}if(Z>=100){ae=0}return O-ae}else{if(G.columnId==="sent"||G.columnId==="received"||G.columnId==="input"||G.columnId==="output"||G.columnId==="transferred"){var ad=al[G.columnId].split(/\(([^)]+)\)/);var ai=ak[G.columnId].split(/\(([^)]+)\)/);var an=a[I].count%4;if(an<2){e("#"+I+" span."+G.columnId+"-title").addClass("sorted");var R=i.parseCount(ad[0]);var V=i.parseCount(ai[0]);return R-V}else{e("#"+I+" span."+G.columnId+"-size-title").addClass("sorted");var Y=i.parseSize(ad[1]);var P=i.parseSize(ai[1]);return Y-P}}else{if(G.columnId==="io"){var an=a[I].count%4;if(an<2){e("#"+I+" span.read-title").addClass("sorted");var aq=i.parseSize(al.read);var aj=i.parseSize(ak.read);return aq-aj}else{e("#"+I+" span.written-title").addClass("sorted");var W=i.parseSize(al.written);var ap=i.parseSize(ak.written);return W-ap}}else{if(G.columnId==="tasks"){var an=a[I].count%4;if(an<2){e("#"+I+" span.tasks-title").addClass("sorted");var ac=i.parseCount(al.tasks);var ah=i.parseCount(ak.tasks);return ac-ah}else{e("#"+I+" span.time-title").addClass("sorted");var M=i.parseDuration(al.tasksDuration);var ab=i.parseDuration(ak.tasksDuration);return M-ab}}else{var aa=i.isDefinedAndNotNull(al[G.columnId])?al[G.columnId]:"";var X=i.isDefinedAndNotNull(ak[G.columnId])?ak[G.columnId]:"";return aa===X?0:aa>X?1:-1}}}}}}}}};e("#"+I+" span.queued-title").removeClass("sorted");e("#"+I+" span.queued-size-title").removeClass("sorted");e("#"+I+" span.backpressure-object-title").removeClass("sorted");e("#"+I+" span.backpressure-data-size-title").removeClass("sorted");e("#"+I+" span.backpressure-prediction-object-title").removeClass("sorted");e("#"+I+" span.backpressure-prediction-data-size-title").removeClass("sorted");e("#"+I+" span.backpressure-prediction-time-title").removeClass("sorted");e("#"+I+" span.input-title").removeClass("sorted");e("#"+I+" span.input-size-title").removeClass("sorted");e("#"+I+" span.output-title").removeClass("sorted");e("#"+I+" span.output-size-title").removeClass("sorted");e("#"+I+" span.read-title").removeClass("sorted");e("#"+I+" span.written-title").removeClass("sorted");e("#"+I+" span.time-title").removeClass("sorted");e("#"+I+" span.tasks-title").removeClass("sorted");e("#"+I+" span.sent-title").removeClass("sorted");e("#"+I+" span.sent-size-title").removeClass("sorted");e("#"+I+" span.received-title").removeClass("sorted");e("#"+I+" span.received-size-title").removeClass("sorted");e("#"+I+" span.transferred-title").removeClass("sorted");e("#"+I+" span.transferred-size-title").removeClass("sorted");if(a[I].prevColumn!==G.columnId){a[I].count=0}else{a[I].count++}J.sort(H,G.sortAsc);a[I].prevColumn=G.columnId};var l=function(H,G){if(G.searchString===""){return true}try{var J=new RegExp(G.searchString,"i")}catch(I){return false}return H[G.property].search(J)>=0};var t=function(){var H=B.urls.systemDiagnostics;var G={};if(!i.isNull(g)){G.clusterNodeId=g}if(!e.isEmptyObject(G)){H+="?"+e.param(G)}return e.ajax({type:"GET",url:H,dataType:"json"}).done(function(M){var R=M.systemDiagnostics;var K=R.aggregateSnapshot;e("#max-heap").text(K.maxHeap);e("#total-heap").text(K.totalHeap);e("#used-heap").text(K.usedHeap);e("#free-heap").text(K.freeHeap);if(i.isDefinedAndNotNull(K.heapUtilization)){e("#utilization-heap").text("("+K.heapUtilization+")")}else{e("#utilization-heap").text("")}e("#max-non-heap").text(K.maxNonHeap);e("#total-non-heap").text(K.totalNonHeap);e("#used-non-heap").text(K.usedNonHeap);e("#free-non-heap").text(K.freeNonHeap);if(i.isDefinedAndNotNull(K.nonHeapUtilization)){e("#utilization-non-heap").text("("+K.nonHeapUtilization+")")}else{e("#utilization-non-heap").text("")}var Q=e("#garbage-collection-table tbody").empty();if(i.isDefinedAndNotNull(K.garbageCollection)){var L=K.garbageCollection.sort(function(W,V){return W.name===V.name?0:W.name>V.name?1:-1});e.each(L,function(W,V){s(Q,V)})}e("#uptime").text(K.uptime);e("#available-processors").text(K.availableProcessors);if(i.isDefinedAndNotNull(K.processorLoadAverage)){e("#processor-load-average").text(i.formatFloat(K.processorLoadAverage))}else{e("#processor-load-average").html(i.formatValue(K.processorLoadAverage))}var S=e("#flow-file-repository-storage-usage-container").empty();d(S,K.flowFileRepositoryStorageUsage);var O=e("#content-repository-storage-usage-container").empty();if(i.isDefinedAndNotNull(K.contentRepositoryStorageUsage)){var P=K.contentRepositoryStorageUsage.sort(function(W,V){return W.identifier===V.identifier?0:W.identifier>V.identifier?1:-1});e.each(P,function(V,W){d(O,W)})}var U=e("#provenance-repository-storage-usage-container").empty();if(i.isDefinedAndNotNull(K.provenanceRepositoryStorageUsage)){var J=K.provenanceRepositoryStorageUsage.sort(function(W,V){return W.identifier===V.identifier?0:W.identifier>V.identifier?1:-1});e.each(J,function(W,V){d(U,V)})}var N={"#version-nifi":K.versionInfo.niFiVersion,"#version-build-tag":K.versionInfo.buildTag,"#version-build-timestamp":K.versionInfo.buildTimestamp,"#version-build-branch":K.versionInfo.buildBranch,"#version-build-revision":K.versionInfo.buildRevision,"#version-java-version":K.versionInfo.javaVersion,"#version-java-vendor":K.versionInfo.javaVendor,"#version-os-name":K.versionInfo.osName,"#version-os-version":K.versionInfo.osVersion,"#version-os-arch":K.versionInfo.osArchitecture};for(var I in N){var T=N[I];if(T){e(I).text(T)}else{e(I).text("(not available)").addClass("unset")}}e("#system-diagnostics-last-refreshed").text(K.statsLastRefreshed)}).fail(h.handleAjaxError)};var s=function(H,G){var J=e("<tr></tr>").appendTo(H);e('<td class="setting-name"></td>').text(G.name+":").appendTo(J);var I=e("<tr></tr>").appendTo(H);e("<td></td>").append(e("<b></b>").text(G.collectionCount+" times ("+G.collectionTime+")")).appendTo(I);e("<tr></tr>").text(" ").appendTo(H)};var d=function(H,K){var J=parseInt(K.totalSpaceBytes,10);var I=parseInt(K.usedSpaceBytes,10);var M=e('<div class="storage-usage"></div>').appendTo(H);var L=e('<div class="storage-identifier setting-name"></div>');L.text("Usage:");if(i.isDefinedAndNotNull(K.identifier)){L.text("Usage for "+K.identifier+":")}L.appendTo(M);(F.injector.get("$compile")(e('<md-progress-linear class="md-hue-2" md-mode="determinate" value="'+(I/J)*100+'" aria-label="FlowFile Repository Storage Usage"></md-progress-linear>'))(F.rootScope)).appendTo(M);var G=e('<div class="storage-usage-details"></div>').text(" ("+K.usedSpace+" of "+K.totalSpace+")").prepend(e("<b></b>").text(Math.round((I/J)*100)+"%"));e('<div class="storage-usage-header"></div>').append(G).append('<div class="clear"></div>').appendTo(M)};var z=function(){return e("#summary-filter").val()};var w=function(N,M,H,L,K,J,I,G){e.each(I.processorStatusSnapshots,function(P,O){var Q=O.processorStatusSnapshot;Q.parentProcessGroupName=I.name;Q.processGroupNamePath=G.reduce(function(R,S){return R+"/"+S.name},"");N.push(Q)});e.each(I.connectionStatusSnapshots,function(O,P){M.push(P.connectionStatusSnapshot)});e.each(I.inputPortStatusSnapshots,function(O,P){L.push(P.portStatusSnapshot)});e.each(I.outputPortStatusSnapshots,function(O,P){K.push(P.portStatusSnapshot)});e.each(I.remoteProcessGroupStatusSnapshots,function(O,P){J.push(P.remoteProcessGroupStatusSnapshot)});H.push(I);e.each(I.processGroupStatusSnapshots,function(O,P){var Q=P.processGroupStatusSnapshot;w(N,M,H,L,K,J,Q,j(G,Q))})};var j=function(G,I){var H=G.slice();H.push(I);return H};var C=function(){var G;if(e("#processor-summary-table").is(":visible")){G=e("#processor-summary-table").data("gridInstance")}else{if(e("#connection-summary-table").is(":visible")){G=e("#connection-summary-table").data("gridInstance")}else{if(e("#input-port-summary-table").is(":visible")){G=e("#input-port-summary-table").data("gridInstance")}else{if(e("#output-port-summary-table").is(":visible")){G=e("#output-port-summary-table").data("gridInstance")}else{if(e("#process-group-summary-table").is(":visible")){G=e("#process-group-summary-table").data("gridInstance")}else{if(e("#remote-process-group-summary-table").is(":visible")){G=e("#remote-process-group-summary-table").data("gridInstance")}}}}}}if(i.isDefinedAndNotNull(G)){var H=G.getData();H.setFilterArgs({searchString:z(),property:e("#summary-filter-type").combo("getSelectedOption").value});H.refresh()}};var m=function(G,H){e.ajax({type:"GET",url:B.urls.api+"/flow/processors/"+encodeURIComponent(H)+"/status",data:{nodewise:true},dataType:"json"}).done(function(I){if(i.isDefinedAndNotNull(I.processorStatus)){var M=I.processorStatus;var K=e("#cluster-processor-summary-table").data("gridInstance");var L=K.getData();var J=[];e.each(M.nodeSnapshots,function(P,N){var O=N.statusSnapshot;J.push({id:N.nodeId,node:N.address+":"+N.apiPort,runStatus:O.runStatus,activeThreadCount:O.activeThreadCount,terminatedThreadCount:O.terminatedThreadCount,input:O.input,read:O.read,written:O.written,output:O.output,tasks:O.tasks,tasksDuration:O.tasksDuration})});L.setItems(J);L.reSort();K.invalidate();e("#cluster-processor-name").text(M.name).ellipsis();e("#cluster-processor-type").text(M.aggregateSnapshot.type).ellipsis();e("#cluster-processor-id").text(M.id);e("#cluster-processor-group-id").text(M.groupId);e("#cluster-processor-summary-last-refreshed").text(M.statsLastRefreshed)}}).fail(h.handleAjaxError)};var b=function(G,H){e.ajax({type:"GET",url:B.urls.api+"/flow/connections/"+encodeURIComponent(H)+"/status",data:{nodewise:true},dataType:"json"}).done(function(N){if(i.isDefinedAndNotNull(N.connectionStatus)){var M=N.connectionStatus;var P=e("#cluster-connection-summary-table").data("gridInstance");var L=P.getData();var R=[];e.each(M.nodeSnapshots,function(U,S){var T=S.statusSnapshot;R.push({id:S.nodeId,node:S.address+":"+S.apiPort,input:T.input,queued:T.queued,queuedCount:T.queuedCount,queuedSize:T.queuedSize,percentUseCount:T.percentUseCount,percentUseBytes:T.percentUseBytes,predictions:T.predictions,output:T.output})});var Q=D.some(R,function(S){return D.isNil(S.predictions)});var K=P.getColumns();if(Q){var J=K.filter(function(S){return S.id!==r.id});P.setColumns(J)}else{var O=K.findIndex(function(S){return S.id===r.id});if(O<0){var I=K.findIndex(function(S){return S.id==="backpressure"});if(I<0){K.push(r)}else{K.splice(I+1,0,r)}P.setColumns(K)}}L.setItems(R);L.reSort();P.invalidate();e("#cluster-connection-name").text(M.name).ellipsis();e("#cluster-connection-type").text("Connection").ellipsis();e("#cluster-connection-id").text(M.id);e("#cluster-connection-group-id").text(M.groupId);e("#cluster-connection-summary-last-refreshed").text(M.statsLastRefreshed)}}).fail(h.handleAjaxError)};var o=function(G){e.ajax({type:"GET",url:B.urls.api+"/flow/process-groups/"+encodeURIComponent(G)+"/status",data:{nodewise:true,recursive:false},dataType:"json"}).done(function(J){if(i.isDefinedAndNotNull(J.processGroupStatus)){var L=J.processGroupStatus;var H=e("#cluster-process-group-summary-table").data("gridInstance");var K=H.getData();var I=[];e.each(L.nodeSnapshots,function(O,M){var N=M.statusSnapshot;I.push({id:M.nodeId,node:M.address+":"+M.apiPort,activeThreadCount:N.activeThreadCount,transferred:N.transferred,input:N.input,queued:N.queued,queuedCount:N.queuedCount,queuedSize:N.queuedSize,output:N.output,read:N.read,written:N.written,sent:N.sent,received:N.received})});K.setItems(I);K.reSort();H.invalidate();e("#cluster-process-group-name").text(L.name).ellipsis();e("#cluster-process-group-type").text("Process Group").ellipsis();e("#cluster-process-group-id").text(L.id);e("#cluster-process-group-summary-last-refreshed").text(L.statsLastRefreshed)}}).fail(h.handleAjaxError)};var v=function(G,H){e.ajax({type:"GET",url:B.urls.api+"/flow/input-ports/"+encodeURIComponent(H)+"/status",data:{nodewise:true},dataType:"json"}).done(function(J){if(i.isDefinedAndNotNull(J.portStatus)){var K=J.portStatus;var I=e("#cluster-input-port-summary-table").data("gridInstance");var L=I.getData();var M=[];e.each(K.nodeSnapshots,function(P,N){var O=N.statusSnapshot;M.push({id:N.nodeId,node:N.address+":"+N.apiPort,runStatus:O.runStatus,activeThreadCount:O.activeThreadCount,output:O.output})});L.setItems(M);L.reSort();I.invalidate();e("#cluster-input-port-name").text(K.name).ellipsis();e("#cluster-input-port-type").text("Input Port").ellipsis();e("#cluster-input-port-id").text(K.id);e("#cluster-input-port-group-id").text(K.groupId);e("#cluster-input-port-summary-last-refreshed").text(K.statsLastRefreshed)}}).fail(h.handleAjaxError)};var k=function(G,H){e.ajax({type:"GET",url:B.urls.api+"/flow/output-ports/"+encodeURIComponent(H)+"/status",data:{nodewise:true},dataType:"json"}).done(function(J){if(i.isDefinedAndNotNull(J.portStatus)){var I=J.portStatus;var K=e("#cluster-output-port-summary-table").data("gridInstance");var M=K.getData();var L=[];e.each(I.nodeSnapshots,function(P,N){var O=N.statusSnapshot;L.push({id:N.nodeId,node:N.address+":"+N.apiPort,runStatus:O.runStatus,activeThreadCount:O.activeThreadCount,input:O.input})});M.setItems(L);M.reSort();K.invalidate();e("#cluster-output-port-name").text(I.name).ellipsis();e("#cluster-output-port-type").text("Output Port").ellipsis();e("#cluster-output-port-id").text(I.id);e("#cluster-output-port-group-id").text(I.groupId);e("#cluster-output-port-summary-last-refreshed").text(I.statsLastRefreshed)}}).fail(h.handleAjaxError)};var f=function(H,G){e.ajax({type:"GET",url:B.urls.api+"/flow/remote-process-groups/"+encodeURIComponent(G)+"/status",data:{nodewise:true},dataType:"json"}).done(function(J){if(i.isDefinedAndNotNull(J.remoteProcessGroupStatus)){var M=J.remoteProcessGroupStatus;var K=e("#cluster-remote-process-group-summary-table").data("gridInstance");var L=K.getData();var I=[];e.each(M.nodeSnapshots,function(P,N){var O=N.statusSnapshot;I.push({id:N.nodeId,node:N.address+":"+N.apiPort,targetUri:O.targetUri,transmissionStatus:O.transmissionStatus,sent:O.sent,received:O.received,activeThreadCount:O.activeThreadCount})});L.setItems(I);L.reSort();K.invalidate();e("#cluster-remote-process-group-name").text(M.name).ellipsis();e("#cluster-remote-process-group-type").text("Remote Process Group").ellipsis();e("#cluster-remote-process-group-id").text(M.id);e("#cluster-remote-process-group-group-id").text(M.groupId);e("#cluster-remote-process-group-summary-last-refreshed").text(M.statsLastRefreshed)}}).fail(h.handleAjaxError)};var g=null;return{init:function(G){return e.Deferred(function(H){var I=e.ajax({type:"GET",url:B.urls.flowConfig,dataType:"json"}).done(function(K){var J=K.flowConfiguration;c.init(J.timeOffset);q.init({supportsGoTo:false,supportsStatusBar:false});p.init();u(G);H.resolve()}).fail(function(){H.reject()})}).promise()},setClusterNodeId:function(G){g=G},resetTableSize:function(){var L=e("#processor-summary-table");if(L.is(":visible")){var P=L.data("gridInstance");if(i.isDefinedAndNotNull(P)){P.resizeCanvas()}}var O=e("#connection-summary-table");if(O.is(":visible")){var K=O.data("gridInstance");if(i.isDefinedAndNotNull(K)){K.resizeCanvas()}}var G=e("#process-group-summary-table");if(G.is(":visible")){var M=G.data("gridInstance");if(i.isDefinedAndNotNull(M)){M.resizeCanvas()}}var R=e("#input-port-summary-table");if(R.is(":visible")){var Q=R.data("gridInstance");if(i.isDefinedAndNotNull(Q)){Q.resizeCanvas()}}var I=e("#output-port-summary-table");if(I.is(":visible")){var N=I.data("gridInstance");if(i.isDefinedAndNotNull(N)){N.resizeCanvas()}}var J=e("#remote-process-group-summary-table");if(J.is(":visible")){var H=J.data("gridInstance");if(i.isDefinedAndNotNull(H)){H.resizeCanvas()}}},loadSummaryTable:function(){var G=B.urls.status;var H={};if(!i.isNull(g)){H.clusterNodeId=g}if(!e.isEmptyObject(H)){G+="?"+e.param(H)}return e.ajax({type:"GET",url:G,data:{recursive:true},dataType:"json"}).done(function(I){var aa=I.processGroupStatus;var O=aa.aggregateSnapshot;if(i.isDefinedAndNotNull(O)){var T=e("#processor-summary-table");i.cleanUpTooltips(T,"div.has-bulletins");var R=T.data("gridInstance");var P=R.getData();var M=e("#connection-summary-table").data("gridInstance");var K=M.getData();var J=e("#process-group-summary-table");i.cleanUpTooltips(J,"div.has-bulletins");var U=J.data("gridInstance");var S=U.getData();var ak=e("#input-port-summary-table");i.cleanUpTooltips(ak,"div.has-bulletins");var ai=ak.data("gridInstance");var ah=ai.getData();var al=e("#output-port-summary-table");i.cleanUpTooltips(al,"div.has-bulletins");var X=al.data("gridInstance");var V=X.getData();var Z=e("#remote-process-group-summary-table");i.cleanUpTooltips(Z,"div.has-bulletins");var ad=Z.data("gridInstance");var ac=ad.getData();var aj=[];var ag=[];var Q=[];var ab=[];var am=[];var N=[];w(aj,ag,Q,ab,am,N,O,[O]);var ae=D.some(ag,function(an){return D.isNil(an.predictions)});var L=M.getColumns();if(ae){var Y=L.filter(function(an){return an.id!==r.id});M.setColumns(Y)}else{var af=L.findIndex(function(an){return an.id===r.id});if(af<0){var W=L.findIndex(function(an){return an.id==="backpressure"});if(W<0){L.push(r)}else{L.splice(W+1,0,r)}M.setColumns(L)}}P.setItems(aj);P.reSort();R.invalidate();K.setItems(ag);K.reSort();M.invalidate();S.setItems(Q);S.reSort();U.invalidate();ah.setItems(ab);ah.reSort();ai.invalidate();V.setItems(am);V.reSort();X.invalidate();ac.setItems(N);ac.reSort();ad.invalidate();e("#summary-last-refreshed").text(aa.statsLastRefreshed);if(e("#processor-summary-table").is(":visible")){e("#total-items").text(i.formatInteger(aj.length))}else{if(e("#connection-summary-table").is(":visible")){e("#total-items").text(i.formatInteger(ag.length))}else{if(e("#input-port-summary-table").is(":visible")){e("#total-items").text(i.formatInteger(ab.length))}else{if(e("#output-port-summary-table").is(":visible")){e("#total-items").text(i.formatInteger(am.length))}else{if(e("#process-group-summary-table").is(":visible")){e("#total-items").text(i.formatInteger(Q.length))}else{e("#total-items").text(i.formatInteger(N.length))}}}}}}else{e("#total-items").text("0")}}).fail(h.handleAjaxError)}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Common","nf.Dialog","nf.SummaryTable"],function(d,e,c,f){return(nf.ClusterSearch=b(d,e,c,f))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ClusterSearch=b(require("jquery"),require("nf.Common"),require("nf.Dialog"),require("nf.SummaryTable")))}else{nf.ClusterSearch=b(a.$,a.nf.Common,a.nf.Dialog,a.nf.SummaryTable)}}}(this,function(c,d,b,e){var a={search:"Search nodes",urls:{clusterSearch:"../nifi-api/flow/cluster/search-results"}};return{init:function(){c("#view-single-node-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Select node",buttons:[{buttonText:"Ok",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){var f=c("#cluster-search-field").val();c.ajax({type:"GET",data:{q:f},dataType:"json",url:a.urls.clusterSearch}).done(function(g){var i=g.nodeResults;var h=function(k){e.setClusterNodeId(k.id);e.loadSummaryTable();c("#summary-header-text").text(k.address+" Summary")};if(!c.isArray(i)||i.length===0){b.showOkDialog({headerText:"Cluster Search",dialogContent:"No nodes match '"+d.escapeHtml(f)+"'."})}else{if(i.length>1){var j=false;c.each(i,function(l,k){if(k.address===f){h(k);j=true;return false}});if(j){c("#view-single-node-dialog").modal("hide")}else{b.showOkDialog({headerText:"Cluster Search",dialogContent:"More than one node matches '"+d.escapeHtml(f)+"'."})}}else{if(i.length===1){h(i[0]);c("#view-single-node-dialog").modal("hide")}}}})}}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){this.modal("hide")}}}],handler:{close:function(){c("#cluster-search-field").val(a.search).addClass("search-nodes").clusterSearchAutocomplete("reset")}}});c.widget("nf.clusterSearchAutocomplete",c.ui.autocomplete,{reset:function(){this.term=null},_create:function(){this._super();this.widget().menu("option","items","> :not(.search-no-matches)")},_normalize:function(g){var f=[];f.push(g);return f},_renderMenu:function(h,f){var i=f[0];var g=this;c.each(i.nodeResults,function(j,k){g._renderItem(h,{label:k.address,value:k.address})});if(h.children().length===0){h.append('<li class="unset search-no-matches">No nodes matched the search terms</li>')}},_resizeMenu:function(){var f=this.menu.element;f.width(c("#cluster-search-field").outerWidth()-2)},_renderItem:function(g,f){var h=c("<a></a>").text(f.label);return c("<li></li>").data("ui-autocomplete-item",f).append(h).appendTo(g)}});c("#cluster-search-field").clusterSearchAutocomplete({minLength:0,appendTo:"#search-cluster-results",position:{my:"left top",at:"left bottom",offset:"0 1"},source:function(g,f){c.ajax({type:"GET",data:{q:g.term},dataType:"json",url:a.urls.clusterSearch}).done(function(h){f(h)})}}).focus(function(){if(c(this).val()===a.search){c(this).val("").removeClass("search-nodes")}}).val(a.search).addClass("search-nodes");c("#view-single-node-link").click(function(){c("#view-single-node-dialog").modal("show");c("#cluster-search-field").focus()});c("#view-cluster-link").click(function(){e.setClusterNodeId(null);e.loadSummaryTable();c("#summary-header-text").text("NiFi Summary")});c("#view-options-container").show()}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define([],function(){return(nf.ng.ServiceProvider=b())})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ng.ServiceProvider=b())}else{nf.ng.ServiceProvider=b()}}}(this,function(){return function(){function a(){}a.prototype={constructor:a,register:function(c,b){this[c]=b},remove:function(b){delete this[b]}};return new a()}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["nf.ng.Bridge","nf.Common","nf.CanvasUtils","nf.ClusterSummary","nf.Actions"],function(e,f,g,c,d){return(nf.ng.AppCtrl=b(e,f,g,c,d))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ng.AppCtrl=b(require("nf.ng.Bridge"),require("nf.CanvasUtils"),require("nf.Common"),require("nf.ClusterSummary"),require("nf.Actions")))}else{nf.ng.AppCtrl=b(a.nf.ng.Bridge,a.nf.CanvasUtils,a.nf.Common,a.nf.ClusterSummary,a.nf.Actions)}}}(this,function(c,d,e,a,b){return function(g,i){function f(j){this.nf={Common:e,ClusterSummary:a,Actions:b,CanvasUtils:d,};this.serviceProvider=j}f.prototype={constructor:f};var h=new f(i);g.appCtrl=h;c.rootScope=g}}));
(function(a,b){if(typeof define==="function"&&define.amd){define([],function(){return(nf.ng.AppConfig=b())})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ng.AppConfig=b())}else{nf.ng.AppConfig=b()}}}(this,function(){return function(a,b){b.debugInfoEnabled(false);a.definePalette("basePalette",{"50":"728E9B","100":"728E9B","200":"004849","300":"775351","400":"728E9B","500":"728E9B","600":"728E9B","700":"728E9B","800":"728E9B","900":"rgba(249,250,251,0.97)",A100:"728E9B",A200:"728E9B",A400:"728E9B",A700:"728E9B",contrastDefaultColor:"light",contrastDarkColors:["A100"],contrastLightColors:undefined});a.definePalette("tintPalette",{"50":"728E9B","100":"728E9B","200":"CCDADB","300":"728E9B","400":"AABBC3","500":"728E9B","600":"C7D2D7","700":"728E9B","800":"E3E8EB","900":"728E9B",A100:"728E9B",A200:"728E9B",A400:"728E9B",A700:"728E9B",contrastDefaultColor:"light",contrastDarkColors:["A100"],contrastLightColors:undefined});a.definePalette("warnPalette",{"50":"BA554A","100":"BA554A","200":"BA554A","300":"BA554A","400":"BA554A","500":"BA554A","600":"BA554A","700":"BA554A","800":"BA554A","900":"BA554A",A100:"BA554A",A200:"BA554A",A400:"BA554A",A700:"BA554A",contrastDefaultColor:"light",contrastDarkColors:["A100"],contrastLightColors:undefined});a.theme("default").primaryPalette("basePalette",{"default":"500","hue-1":"200","hue-2":"300","hue-3":"900"}).accentPalette("tintPalette",{"default":"200","hue-1":"400","hue-2":"600","hue-3":"800"}).warnPalette("warnPalette",{"default":"500"})}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","angular","nf.Common","nf.ClusterSummary","nf.ClusterSearch","nf.ng.AppConfig","nf.ng.AppCtrl","nf.ng.ServiceProvider","nf.ng.Bridge","nf.ErrorHandler","nf.Storage","nf.SummaryTable"],function(f,l,e,k,n,o,j,d,c,h,i,g,m){return(nf.Summary=b(f,l,e,k,n,o,j,d,h,i,g,m))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.Summary=b(require("jquery"),require("angular"),require("nf.Common"),require("nf.ClusterSummary"),require("nf.ClusterSearch"),require("nf.ng.AppConfig"),require("nf.ng.AppCtrl"),require("nf.ng.ServiceProvider"),require("nf.ng.Bridge"),require("nf.ErrorHandler"),require("nf.Storage"),require("nf.SummaryTable")))}else{nf.Summary=b(a.$,a.angular,a.nf.Common,a.nf.ClusterSummary,a.nf.ClusterSearch,a.nf.ng.AppConfig,a.nf.ng.AppCtrl,a.nf.ng.ServiceProvider,a.nf.ng.Bridge,a.nf.ErrorHandler,a.nf.Storage,a.nf.SummaryTable)}}}(this,function(e,m,d,k,o,p,j,c,g,i,f,n){e(document).ready(function(){var q=m.module("ngSummaryApp",["ngResource","ngRoute","ngMaterial","ngMessages"]);p.$inject=["$mdThemingProvider","$compileProvider"];j.$inject=["$scope","serviceProvider"];c.$inject=[];q.config(p);q.controller("ngSummaryAppCtrl",j);q.service("serviceProvider",c);g.injector=m.bootstrap(e("body"),["ngSummaryApp"],{strictDi:true});k.loadClusterSummary().done(function(){h.init()})});var b={urls:{banners:"../nifi-api/flow/banners",about:"../nifi-api/flow/about",clusterSummary:"../nifi-api/flow/cluster/summary"}};var l=function(){return e.Deferred(function(q){e.ajax({type:"GET",url:b.urls.clusterSummary}).done(function(r){n.init(r.clusterSummary.connectedToCluster).done(function(){if(r.clusterSummary.connectedToCluster){o.init()}q.resolve()}).fail(function(){q.reject()})}).fail(i.handleAjaxError)}).promise()};var a=function(){e("#refresh-button").click(function(){k.loadClusterSummary().done(function(){n.loadSummaryTable()})});return e.Deferred(function(q){if(top===window){e.ajax({type:"GET",url:b.urls.banners,dataType:"json"}).done(function(v){if(d.isDefinedAndNotNull(v.banners)){if(d.isDefinedAndNotNull(v.banners.headerText)&&v.banners.headerText!==""){var s=e("#banner-header").text(v.banners.headerText).show();var u=function(w){var x=e("#"+w);x.css("top",(parseInt(s.css("height"),10)+parseInt(x.css("top"),10))+"px")};u("summary")}if(d.isDefinedAndNotNull(v.banners.footerText)&&v.banners.footerText!==""){var r=e("#banner-footer").text(v.banners.footerText).show();var t=function(w){var x=e("#"+w);x.css("bottom",parseInt(r.css("height"),10)+"px")};t("summary")}}q.resolve()}).fail(function(t,r,s){i.handleAjaxError(t,r,s);q.reject()})}else{q.resolve()}}).promise()};var h={init:function(){f.init();l().done(function(){n.loadSummaryTable().done(function(){a().done(function(){var q=function(){if(top===window){e("body").css({height:e(window).height()+"px",width:e(window).width()+"px"});e("#summary").css("margin",40);e("div.summary-table").css("bottom",127);e("#flow-summary-refresh-container").css({position:"absolute",bottom:"0px",margin:"40px"})}n.resetTableSize()};e.ajax({type:"GET",url:b.urls.about,dataType:"json"}).done(function(s){var r=s.about;var t=r.title+" Summary";document.title=t;e("#status-header-text").text(t);q()}).fail(i.handleAjaxError);e(window).on("resize",function(y){q();var r=e(".dialog");for(var w=0,x=r.length;w<x;w++){if(e(r[w]).is(":visible")){setTimeout(function(A){A.modal("resize")},50,e(r[w]))}}var z=e('*[class*="slickgrid_"]');for(var v=0,x=z.length;v<x;v++){if(e(z[v]).is(":visible")){setTimeout(function(A){A.data("gridInstance").resizeCanvas()},50,e(z[v]))}}var t=e(".tab-container");var s=[];for(var u=0,x=t.length;u<x;u++){if(e(t[u]).is(":visible")){s.push(e("#"+e(t[u]).attr("id")+"-content"))}}e.each(s,function(A,B){d.toggleScrollable(B.get(0))})})})})})}};return h}));
